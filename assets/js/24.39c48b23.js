(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{421:function(t,a,s){t.exports=s.p+"assets/img/docker_az01.eb01b39a.jpg"},422:function(t,a,s){t.exports=s.p+"assets/img/docker_az02.c4039220.jpg"},423:function(t,a,s){t.exports=s.p+"assets/img/docker_az03.eed079a8.jpg"},558:function(t,a,s){"use strict";s.r(a);var e=s(14),r=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"确定本机系统内核"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#确定本机系统内核"}},[t._v("#")]),t._v(" 确定本机系统内核")]),t._v(" "),a("p",[t._v("本机系统是CentOS 7")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost docker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cat /etc/redhat-release ")]),t._v("\nCentOS Linux release "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7.4")]),t._v(".1708 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Core"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n")])])]),a("p",[t._v("或者")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost docker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# uname -a")]),t._v("\nLinux localhost.localdomain "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.10")]),t._v(".0-693.el7.x86_64 "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#1 SMP Tue Aug 22 21:09:27 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux")]),t._v("\n")])])]),a("h2",{attrs:{id:"卸载旧版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#卸载旧版本"}},[t._v("#")]),t._v(" 卸载旧版本")]),t._v(" "),a("p",[t._v("较旧的Docker版本称为docker或docker-engine。如果已安装这些程序，请卸载它们以及相关的依赖项。"),a("code",[t._v("/var/lib/docker/")]),t._v("下的镜像、容器等文件也需要可以自行删除。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v(" yum remove "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n             docker-client "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n             docker-client-latest "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n             docker-common "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n             docker-latest "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n             docker-latest-logrotate "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n             docker-logrotate "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n             docker-engine\t\n")])])]),a("h2",{attrs:{id:"安装依赖库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖库"}},[t._v("#")]),t._v(" 安装依赖库")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-y")]),t._v(" yum-utils\n")])])]),a("h2",{attrs:{id:"设置稳定版本的镜像仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置稳定版本的镜像仓库"}},[t._v("#")]),t._v(" 设置稳定版本的镜像仓库")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n")])])]),a("h2",{attrs:{id:"更新yum软件包索引"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更新yum软件包索引"}},[t._v("#")]),t._v(" 更新yum软件包索引")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("yum makecache fast\n")])])]),a("h2",{attrs:{id:"安装docker-engine"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装docker-engine"}},[t._v("#")]),t._v(" 安装Docker Engine")]),t._v(" "),a("blockquote",[a("p",[t._v("Docker CE（Docker Engine - Community 社区免费版本）；Docker EE（企业版，强调安全，但需付费使用）")])]),t._v(" "),a("p",[t._v("我们这边使用社区版本，默认安装的是最新版本")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("yum "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-y")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" docker-ce docker-ce-cli containerd.io\n")])])]),a("p",[t._v("或者安装指定版本")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("yum list docker-ce "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--showduplicates")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sort")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-r")]),t._v("\n已加载插件：fastestmirror\n已安装的软件包\n可安装的软件包\n * updates: mirrors.ustc.edu.cn\nLoading mirror speeds from cached hostfile\n * extras: mirrors.bfsu.edu.cn\ndocker-ce.x86_64            "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(":24.0.2-1.el7                     docker-ce-stable \ndocker-ce.x86_64            "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(":24.0.2-1.el7                     @docker-ce-stable\ndocker-ce.x86_64            "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(":24.0.1-1.el7                     docker-ce-stable \ndocker-ce.x86_64            "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(":24.0.0-1.el7                     docker-ce-stable \ndocker-ce.x86_64            "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(":23.0.6-1.el7                     docker-ce-stable \ndocker-ce.x86_64            "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(":23.0.5-1.el7                     docker-ce-stable \ndocker-ce.x86_64            "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(":23.0.4-1.el7                     docker-ce-stable \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n\n")])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" docker-ce-"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("VERSION_STRING"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" docker-ce-cli-"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("VERSION_STRING"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" containerd.io\n")])])]),a("h2",{attrs:{id:"启动docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动docker"}},[t._v("#")]),t._v(" 启动docker")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("systemctl start "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v("\n")])])]),a("h2",{attrs:{id:"运行hello-world镜像验证是否正确安装了docker-engine"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行hello-world镜像验证是否正确安装了docker-engine"}},[t._v("#")]),t._v(" 运行hello-world镜像验证是否正确安装了Docker Engine")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost docker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker run hello-world")]),t._v("\n\nHello from Docker"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\nThis message shows that your installation appears to be working correctly.\n\nTo generate this message, Docker took the following steps:\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(". The Docker client contacted the Docker daemon.\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(". The Docker daemon pulled the "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello-world"')]),t._v(" image from the Docker Hub.\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("amd64"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(". The Docker daemon created a new container from that image "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("which")]),t._v(" runs the\n    executable that produces the output you are currently reading.\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(". The Docker daemon streamed that output to the Docker client, "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("which")]),t._v(" sent it\n    to your terminal.\n\nTo try something "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("more")]),t._v(" ambitious, you can run an Ubuntu container with:\n $ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-it")]),t._v(" ubuntu "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v("\n\nShare images, automate workflows, and "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("more")]),t._v(" with a "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("free")]),t._v(" Docker ID:\n https://hub.docker.com/\n\nFor "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("more")]),t._v(" examples and ideas, visit:\n https://docs.docker.com/get-started/\n\n")])])]),a("p",[t._v("出现如上表示成功运行hello-world")]),t._v(" "),a("h2",{attrs:{id:"配置hub国内镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置hub国内镜像"}},[t._v("#")]),t._v(" 配置Hub国内镜像")]),t._v(" "),a("ol",[a("li",[t._v("如果拉取镜像失败，需要配置国内的镜像")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /etc/docker/daemon.json\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("配置网易163的hub镜像，也可以配置国内其他镜像，比如阿里云镜像")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"registry-mirrors"')]),t._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://hub-mirror.c.163.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("重启服务")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("systemctl daemon-reload\nsystemctl restart "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v("\n")])])]),a("ol",{attrs:{start:"4"}},[a("li",[t._v("再次执行")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run hello-world\n")])])]),a("h3",{attrs:{id:"配置阿里云镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置阿里云镜像"}},[t._v("#")]),t._v(" 配置阿里云镜像")]),t._v(" "),a("ol",[a("li",[t._v("打开"),a("a",{attrs:{href:"https://promotion.aliyun.com/ntms/act/kubernetes.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("注册地址"),a("OutboundLink")],1),t._v("，使用淘宝或者支付宝账号登录")]),t._v(" "),a("li",[t._v("选择控制台\n"),a("img",{attrs:{src:s(421),alt:""}})]),t._v(" "),a("li",[t._v("搜索容器镜像服务\n"),a("img",{attrs:{src:s(422),alt:""}})]),t._v(" "),a("li",[t._v("复制镜像地址\n"),a("img",{attrs:{src:s(423),alt:""}})]),t._v(" "),a("li",[t._v("修改daemon.json")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /etc/docker/daemon.json\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"registry-mirrors"')]),t._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://xxxx.mirror.aliyuncs.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ol",{attrs:{start:"6"}},[a("li",[t._v("重启服务")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("systemctl daemon-reload\nsystemctl restart "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v("\n")])])]),a("ol",{attrs:{start:"7"}},[a("li",[t._v("测试拉取镜像")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" pull tomcat\n")])])]),a("h2",{attrs:{id:"run命令干了哪些事情"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#run命令干了哪些事情"}},[t._v("#")]),t._v(" run命令干了哪些事情")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("检查本地是否有hello-world镜像，有则以改镜像为模板创建容器实例运行。")])]),t._v(" "),a("li",[a("p",[t._v("没有则从Docker Hub拉取（默认从国外的Hub拉取，配置了国内镜像则拉取国内Hub镜像），相当于执行命令"),a("code",[t._v("docker pull hello-world")]),t._v("。")])]),t._v(" "),a("li",[a("p",[t._v("将镜像为模板创建容器实例运行，相当于执行命令"),a("code",[t._v("docker container create")]),t._v("。")])])]),t._v(" "),a("h2",{attrs:{id:"卸载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#卸载"}},[t._v("#")]),t._v(" 卸载")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("systemctl stop "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v("\nyum remove docker-ce docker-ce-cli containerd.io\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-rf")]),t._v(" /var/lib/docker\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-rf")]),t._v(" /var/lib/containerd\n")])])]),a("h2",{attrs:{id:"底层原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#底层原理"}},[t._v("#")]),t._v(" 底层原理")]),t._v(" "),a("p",[t._v("docker使用Go语言编写，直接使用物理机的硬件资源，并且直接使用宿主机的内核。所以各方面性能都比虚拟机快。虚拟机需要虚拟硬件，在宿主机上虚拟一套系统。")])])}),[],!1,null,null,null);a.default=r.exports}}]);