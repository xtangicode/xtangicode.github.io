<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SpringEL-基础介绍 | Sugar</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/logo.jpg">
    <meta name="description" content="Sugar">
    
    <link rel="preload" href="/assets/css/0.styles.e8e4f3a3.css" as="style"><link rel="preload" href="/assets/js/app.becc5145.js" as="script"><link rel="preload" href="/assets/js/2.8a031f56.js" as="script"><link rel="preload" href="/assets/js/47.3c3fcf46.js" as="script"><link rel="prefetch" href="/assets/js/10.52cab887.js"><link rel="prefetch" href="/assets/js/11.abfb551c.js"><link rel="prefetch" href="/assets/js/12.d46d8e6b.js"><link rel="prefetch" href="/assets/js/13.796cc617.js"><link rel="prefetch" href="/assets/js/14.abb8dcc2.js"><link rel="prefetch" href="/assets/js/15.bc632091.js"><link rel="prefetch" href="/assets/js/16.3e74429b.js"><link rel="prefetch" href="/assets/js/17.928891a5.js"><link rel="prefetch" href="/assets/js/18.2853db4c.js"><link rel="prefetch" href="/assets/js/19.e814de36.js"><link rel="prefetch" href="/assets/js/20.7ea2bb80.js"><link rel="prefetch" href="/assets/js/21.b9a970c5.js"><link rel="prefetch" href="/assets/js/22.8f0aad5d.js"><link rel="prefetch" href="/assets/js/23.37938e1b.js"><link rel="prefetch" href="/assets/js/24.0c1837d6.js"><link rel="prefetch" href="/assets/js/25.daa710f8.js"><link rel="prefetch" href="/assets/js/26.4741f167.js"><link rel="prefetch" href="/assets/js/27.2c3cd4f9.js"><link rel="prefetch" href="/assets/js/28.e7126f3b.js"><link rel="prefetch" href="/assets/js/29.69e495da.js"><link rel="prefetch" href="/assets/js/3.c07a09ea.js"><link rel="prefetch" href="/assets/js/30.60fd56a9.js"><link rel="prefetch" href="/assets/js/31.43a01ec1.js"><link rel="prefetch" href="/assets/js/32.3d0a5c7b.js"><link rel="prefetch" href="/assets/js/33.8bb206bd.js"><link rel="prefetch" href="/assets/js/34.7e634c3d.js"><link rel="prefetch" href="/assets/js/35.bebcaa97.js"><link rel="prefetch" href="/assets/js/36.ed4dd0bb.js"><link rel="prefetch" href="/assets/js/37.2999990f.js"><link rel="prefetch" href="/assets/js/38.3684e1b0.js"><link rel="prefetch" href="/assets/js/39.83466aa5.js"><link rel="prefetch" href="/assets/js/4.eb479c1a.js"><link rel="prefetch" href="/assets/js/40.e75a081b.js"><link rel="prefetch" href="/assets/js/41.650d4fe5.js"><link rel="prefetch" href="/assets/js/42.b36d86a2.js"><link rel="prefetch" href="/assets/js/43.229a5a6e.js"><link rel="prefetch" href="/assets/js/44.ded3279b.js"><link rel="prefetch" href="/assets/js/45.678478c0.js"><link rel="prefetch" href="/assets/js/46.33d79b2c.js"><link rel="prefetch" href="/assets/js/48.12df0a19.js"><link rel="prefetch" href="/assets/js/49.23fe9ddf.js"><link rel="prefetch" href="/assets/js/5.9462a6c1.js"><link rel="prefetch" href="/assets/js/50.1bf8997f.js"><link rel="prefetch" href="/assets/js/51.fd43798a.js"><link rel="prefetch" href="/assets/js/52.7f70dc4d.js"><link rel="prefetch" href="/assets/js/53.12136482.js"><link rel="prefetch" href="/assets/js/54.26249ffe.js"><link rel="prefetch" href="/assets/js/55.0a263515.js"><link rel="prefetch" href="/assets/js/56.4f05f519.js"><link rel="prefetch" href="/assets/js/57.52324724.js"><link rel="prefetch" href="/assets/js/58.5cb03987.js"><link rel="prefetch" href="/assets/js/59.41810f80.js"><link rel="prefetch" href="/assets/js/6.678bf046.js"><link rel="prefetch" href="/assets/js/60.0d67b809.js"><link rel="prefetch" href="/assets/js/61.7ceea6d8.js"><link rel="prefetch" href="/assets/js/62.87e71c61.js"><link rel="prefetch" href="/assets/js/63.fc9c302c.js"><link rel="prefetch" href="/assets/js/64.ca3808c3.js"><link rel="prefetch" href="/assets/js/65.e25f12cf.js"><link rel="prefetch" href="/assets/js/66.2ca8d64a.js"><link rel="prefetch" href="/assets/js/67.b7cdda32.js"><link rel="prefetch" href="/assets/js/68.f27a4837.js"><link rel="prefetch" href="/assets/js/69.8e3c9b33.js"><link rel="prefetch" href="/assets/js/7.929c4487.js"><link rel="prefetch" href="/assets/js/70.8f80e583.js"><link rel="prefetch" href="/assets/js/71.aaef6aba.js"><link rel="prefetch" href="/assets/js/72.45f1df49.js"><link rel="prefetch" href="/assets/js/8.06c0e874.js"><link rel="prefetch" href="/assets/js/9.e420af56.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e8e4f3a3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Sugar</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Java/" class="nav-link">
  Java
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          SQL数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/数据库/MySQL/MySQL目录结构.html" class="nav-link">
  MySQL
</a></li></ul></li><li class="dropdown-item"><h4>
          NoSQL数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/%E6%A1%86%E6%9E%B6/Spring/.html" class="nav-link">
  Redis
</a></li><li class="dropdown-subitem"><a href="/数据库/ElasticSearch/ES知识体系.html" class="nav-link">
  ElasticSearch
</a></li><li class="dropdown-subitem"><a href="/%E6%A1%86%E6%9E%B6/Spring/.html" class="nav-link">
  MangoDB
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          后端框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/%E6%A1%86%E6%9E%B6/Spring/.html" class="nav-link">
  MyBatis
</a></li><li class="dropdown-subitem"><a href="/框架/Spring/SpEL&amp;EL表达式.html" class="nav-link">
  Spring
</a></li><li class="dropdown-subitem"><a href="/%E6%A1%86%E6%9E%B6/Spring/.html" class="nav-link">
  SpringBoot
</a></li><li class="dropdown-subitem"><a href="/%E6%A1%86%E6%9E%B6/Spring/.html" class="nav-link">
  SpringCloud
</a></li><li class="dropdown-subitem"><a href="/框架/Activiti/Activiti介绍.html" class="nav-link">
  Activiti
</a></li></ul></li><li class="dropdown-item"><h4>
          消息队列
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/%E6%A1%86%E6%9E%B6/Spring/.html" class="nav-link">
  RabbitMQ
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><span class="title">中间件</span> <span class="arrow down"></span></button> <button type="button" aria-label="中间件" class="mobile-dropdown-title"><span class="title">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          服务器
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/中间件/Nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-subitem"><a href="/中间件/Tomcat/" class="nav-link">
  Tomcat
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><span class="title">运维</span> <span class="arrow down"></span></button> <button type="button" aria-label="运维" class="mobile-dropdown-title"><span class="title">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/运维/Linux/" class="nav-link">
  Linux
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Java/" class="nav-link">
  Java
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          SQL数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/数据库/MySQL/MySQL目录结构.html" class="nav-link">
  MySQL
</a></li></ul></li><li class="dropdown-item"><h4>
          NoSQL数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/%E6%A1%86%E6%9E%B6/Spring/.html" class="nav-link">
  Redis
</a></li><li class="dropdown-subitem"><a href="/数据库/ElasticSearch/ES知识体系.html" class="nav-link">
  ElasticSearch
</a></li><li class="dropdown-subitem"><a href="/%E6%A1%86%E6%9E%B6/Spring/.html" class="nav-link">
  MangoDB
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          后端框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/%E6%A1%86%E6%9E%B6/Spring/.html" class="nav-link">
  MyBatis
</a></li><li class="dropdown-subitem"><a href="/框架/Spring/SpEL&amp;EL表达式.html" class="nav-link">
  Spring
</a></li><li class="dropdown-subitem"><a href="/%E6%A1%86%E6%9E%B6/Spring/.html" class="nav-link">
  SpringBoot
</a></li><li class="dropdown-subitem"><a href="/%E6%A1%86%E6%9E%B6/Spring/.html" class="nav-link">
  SpringCloud
</a></li><li class="dropdown-subitem"><a href="/框架/Activiti/Activiti介绍.html" class="nav-link">
  Activiti
</a></li></ul></li><li class="dropdown-item"><h4>
          消息队列
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/%E6%A1%86%E6%9E%B6/Spring/.html" class="nav-link">
  RabbitMQ
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><span class="title">中间件</span> <span class="arrow down"></span></button> <button type="button" aria-label="中间件" class="mobile-dropdown-title"><span class="title">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          服务器
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/中间件/Nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-subitem"><a href="/中间件/Tomcat/" class="nav-link">
  Tomcat
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><span class="title">运维</span> <span class="arrow down"></span></button> <button type="button" aria-label="运维" class="mobile-dropdown-title"><span class="title">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/运维/Linux/" class="nav-link">
  Linux
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Spring</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/框架/Spring/SpEL&amp;EL表达式.html" class="active sidebar-link">SpEL&amp;EL表达式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/框架/Spring/SpEL&amp;EL表达式.html#springel-基础介绍" class="sidebar-link">SpringEL-基础介绍</a></li><li class="sidebar-sub-header"><a href="/框架/Spring/SpEL&amp;EL表达式.html#el表达式-基础使用" class="sidebar-link">EL表达式-基础使用</a></li><li class="sidebar-sub-header"><a href="/框架/Spring/SpEL&amp;EL表达式.html#springel-基础使用" class="sidebar-link">SpringEL-基础使用</a></li><li class="sidebar-sub-header"><a href="/框架/Spring/SpEL&amp;EL表达式.html#属性自动注入" class="sidebar-link">属性自动注入</a></li></ul></li><li><a href="/框架/Spring/集成本地缓存.html" class="sidebar-link">集成本地缓存</a></li><li><a href="/框架/Spring/构建多数据源.html" class="sidebar-link">构建多数据源</a></li><li><a href="/框架/Spring/查询百万级数据.html" class="sidebar-link">查询百万级数据</a></li><li><a href="/框架/Spring/批量插入数据.html" class="sidebar-link">批量插入数据</a></li><li><a href="/框架/Spring/集成OSS云存储.html" class="sidebar-link">集成OSS(云存储)</a></li><li><a href="/框架/Spring/获取上下文信息.html" class="sidebar-link">获取上下文信息</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="springel-基础介绍"><a href="#springel-基础介绍" class="header-anchor">#</a> SpringEL-基础介绍</h2> <ol><li>什么是SpringEL(SpEL)？
<ul><li>Spring3中引入了Spring表达式语言—SpringEL，SpEL是一种强大，简洁的装配Bean的方式</li> <li>SpringEL可以通过运行期间执行的表达式将值装配到我们的属性或构造函数当中</li> <li>SpringEL可以调用JDK中提供的静态常量，获取外部Properties文件中的的配置</li></ul></li> <li>为什么要使用SpringEL?
<ul><li>平常通过配置文件或Annotaton注入的Bean，其实都可以称为静态性注入</li> <li>如Bean A中有变量A，它的值需要根据Bean B的B变量为参考，在这场景下静态注入就对这样的处理显得非常无力</li> <li>而Spring3增加的SpringEL就可以完全满足这种需求，而且还可以对不同Bean的字段进行计算再进行赋值，功能非常强大</li></ul></li> <li>如何使用SpringEL?
<ul><li>SpringEL从名字来看就能看出和EL是有点关系的，SpringEL的使用和EL表达式的使用非常相似</li> <li>EL表达式在JSP页面更方便的获取后台中的值，而SpringEL就是为了更方便获取Spring容器中的Bean的值</li> <li>EL使用${}，而SpringEL使用#{}进行表达式的声明</li></ul></li> <li>两者主要区别
<ul><li>$是去找外部配置的参数，将值赋过来</li> <li>#是SpEL表达式，去寻找对应变量的内容</li> <li>也可以直接使用@value(&quot;常量&quot;)注入不使用EL，这样写法与直接赋值等价</li></ul></li> <li>如果是在Spring中使用可以使用**@PropertySource(&quot;classpath:my.properties&quot;)**加载对应配置文件</li></ol> <h2 id="el表达式-基础使用"><a href="#el表达式-基础使用" class="header-anchor">#</a> EL表达式-基础使用</h2> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment">##  配置文件</span>
<span class="token key atrule">com</span><span class="token punctuation">:</span>
  <span class="token key atrule">codecoord</span><span class="token punctuation">:</span>
    <span class="token key atrule">el</span><span class="token punctuation">:</span>
      <span class="token key atrule">num</span><span class="token punctuation">:</span> <span class="token number">1001</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> el
      <span class="token key atrule">language</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> java
        <span class="token punctuation">-</span> spring
        <span class="token punctuation">-</span> mysql
        <span class="token punctuation">-</span> linux
      <span class="token comment">##  逗号分隔可以注入列表</span>
      <span class="token key atrule">language02</span><span class="token punctuation">:</span> java<span class="token punctuation">,</span>spring<span class="token punctuation">,</span>mysql<span class="token punctuation">,</span>linux
</code></pre></div><ol><li>使用EL注入简单值</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
* 注入简单值，直接注入不使用EL，EL不支持直接指定常量
* 直接在EL中指定的常量会当做配置处理，和直接赋值等价
*/</span>
<span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;1432516744&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">Integer</span> no<span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>注入配置文件属性值</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
* 注入整型属性值
*/</span>
<span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${com.codecoord.el.num}&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">Integer</span> num<span class="token punctuation">;</span>
<span class="token comment">/**
* 注入字符属性值
*/</span>
<span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${com.codecoord.el.name}&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>注入默认值</li></ol> <div class="language-yaml extra-class"><pre class="language-yaml"><code>/<span class="token important">**</span>
 * 注入字符不存在属性值并指定默认值，默认值使用过冒号分隔 <span class="token punctuation">:</span>
 * 注入常量其实就可以指定一个不存在的配置然后使用默认值，此处skill的值为java
 <span class="token important">*/</span>
@Value(&quot;$<span class="token punctuation">{</span>com.codecoord.el.skill<span class="token punctuation">:</span>java<span class="token punctuation">}</span>&quot;)
private String skill;
</code></pre></div><ol start="4"><li>注入列表
<ul><li>不支持直接配置文件中数组语法格式注入列表</li> <li>可以识别使用逗号,分隔的配置，spring默认以,分隔</li></ul></li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 错误写法：不支持直接注入yml列表格式语法列表</span>
<span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${com.codecoord.el.language}&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> listLanguage<span class="token punctuation">;</span>
<span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${com.codecoord.el.language}&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> strLanguage<span class="token punctuation">;</span>

</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * 支持,分隔的注入列表
 */</span>
<span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${com.codecoord.el.language02}&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> listLanguage02<span class="token punctuation">;</span>
<span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${com.codecoord.el.language02}&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> strLanguage02<span class="token punctuation">;</span>
</code></pre></div><ol start="5"><li>完整参考如下
<ul><li>配置文件</li></ul></li></ol> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8888</span>
<span class="token key atrule">com</span><span class="token punctuation">:</span>
  <span class="token key atrule">codecoord</span><span class="token punctuation">:</span>
    <span class="token key atrule">el</span><span class="token punctuation">:</span>
      <span class="token key atrule">num</span><span class="token punctuation">:</span> <span class="token number">1001</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> el
      <span class="token key atrule">language</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> java
        <span class="token punctuation">-</span> spring
        <span class="token punctuation">-</span> mysql
        <span class="token punctuation">-</span> linux
      <span class="token comment">##  逗号分隔可以注入列表</span>
      <span class="token key atrule">language02</span><span class="token punctuation">:</span> java<span class="token punctuation">,</span>spring<span class="token punctuation">,</span>mysql<span class="token punctuation">,</span>linux
</code></pre></div><ul><li>属性配置类</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Value</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ElConfig</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
* 注入简单值，直接注入不使用EL，EL不支持直接指定常量
* 直接在EL中指定的常量会当做配置处理，和直接赋值等价
*/</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;1432516744&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> no<span class="token punctuation">;</span>
    <span class="token comment">/**
* 注入整型属性值
*/</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${com.codecoord.el.num}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> num<span class="token punctuation">;</span>
    <span class="token comment">/**
* 注入字符属性值
*/</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${com.codecoord.el.name}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token comment">/**
* 注入字符不存在属性值并指定默认值，默认值使用过冒号分隔 :
* 注入常量其实就可以指定一个不存在的配置然后使用默认值，此处skill的值为java
*/</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${com.codecoord.el.skill:java}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> skill<span class="token punctuation">;</span>
    <span class="token comment">/// 不支持直接注入列表</span>
    <span class="token comment">/*@Value(&quot;${com.codecoord.el.language}&quot;)
private List&lt;String&gt; listLanguage;
@Value(&quot;${com.codecoord.el.language}&quot;)
private String[] strLanguage;*/</span>
    <span class="token comment">/**
* 支持,分隔的注入列表
*/</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${com.codecoord.el.language02}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> listLanguage02<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${com.codecoord.el.language02}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> strLanguage02<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>向controller中注入配置类，然后访问接口测试结果如下</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;no&quot;</span><span class="token operator">:</span> <span class="token number">1432516744</span><span class="token punctuation">,</span>
	<span class="token property">&quot;num&quot;</span><span class="token operator">:</span> <span class="token number">1001</span><span class="token punctuation">,</span>
	<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;el&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;skill&quot;</span><span class="token operator">:</span> <span class="token string">&quot;java&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;listLanguage02&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token string">&quot;java&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;spring&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;mysql&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;linux&quot;</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token property">&quot;strLanguage02&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token string">&quot;java&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;spring&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;mysql&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;linux&quot;</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="springel-基础使用"><a href="#springel-基础使用" class="header-anchor">#</a> SpringEL-基础使用</h2> <ol><li>使用SpEL注入简单值和普通EL注入使用基本一致</li> <li>SpEl注入map
<ul><li>配置文件中需要使用双引号括起来，否则将会注入失败，key为单引号</li></ul></li></ol> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment">##  SpEl</span>
<span class="token key atrule">spEl</span><span class="token punctuation">:</span>
  <span class="token key atrule">mapInject</span><span class="token punctuation">:</span> <span class="token string">&quot;{'name': 'SpEl', 'website': 'http://www.codeocord.com'}&quot;</span>
</code></pre></div><ul><li>java类中先使用${spEl.mapInject}注入字符串值，#{}会解析字符串的值转为map</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;#{${spEl.mapInject}}&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> mapInject<span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>SpEl注入list
<ul><li>除了可以通过EL注入listI外，也可以使用#{${}.split('分隔符')}的方式注入List</li> <li>配置文件中例如使用#分隔</li></ul></li></ol> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">spEl</span><span class="token punctuation">:</span>
  <span class="token key atrule">listInject</span><span class="token punctuation">:</span> <span class="token string">&quot;44#11#99#100&quot;</span>
</code></pre></div><ul><li>java类中先使用${spEl.listInject}注入字符串值，内容使用单引号括起来，然后对字符串使用split方法分隔</li> <li>提示：避免为空情况，可以给一个默认值空串</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;#{'${spEl.listInject:}'.split('#')}&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> listInject<span class="token punctuation">;</span>
</code></pre></div><ol start="4"><li>动态注入
<ul><li>上述注入都是静态注入，SpEl支持从Spring容器中注入信息，称为动态注入。动态注入类如下</li></ul></li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">AllArgsConstructor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpElConstant</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token string">&quot;SpElConstant-name&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> nickname <span class="token operator">=</span> <span class="token string">&quot;tianxin&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> product <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>
        <span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;huaweiMate30Pro&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;xiaomi10x5g&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> productMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>
        <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;huaweiMate30Pro&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;5999&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;xiaomi10x5g&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;4999&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">City</span><span class="token punctuation">&gt;</span></span> cityList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">City</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>
        <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">City</span><span class="token punctuation">(</span><span class="token string">&quot;深圳&quot;</span><span class="token punctuation">,</span> <span class="token number">1000L</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">City</span><span class="token punctuation">(</span><span class="token string">&quot;杭州&quot;</span><span class="token punctuation">,</span> <span class="token number">2000L</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">City</span><span class="token punctuation">(</span><span class="token string">&quot;贵阳&quot;</span><span class="token punctuation">,</span> <span class="token number">900L</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">showProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;showProperty-无参数&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">showProperty</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;showProperty-&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Data</span>
    <span class="token annotation punctuation">@AllArgsConstructor</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">City</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token keyword">long</span> population<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="5"><li>SpEl支持和不支持操作</li></ol> <ul><li>支持动态注入实例，类似于对象自动注入</li> <li>SPL不支持直接注入配置文件中的配置</li> <li>支持调用静态和实例方法
<ul><li>静态方法：@Value(&quot;#{T(package.ClassName).ConstFieldName&quot;)</li></ul></li> <li>支持调用静态类或常量</li> <li>支持运算符运算</li> <li>支持操作集合</li> <li>支持查询筛选集合和投影</li></ul> <ol start="6"><li>注入完整操作如下</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Value</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpElConfig</span> <span class="token punctuation">{</span>
    <span class="token comment">/// 不支持直接注入配置文件值</span>
    <span class="token comment">/*@Value(&quot;#{com.codecoord.el.num}&quot;)
    private Integer num;*/</span>
    <span class="token comment">/**
     * 对象注入
     */</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;#{spElConstant}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">SpElConstant</span> spElConstant<span class="token punctuation">;</span>
    <span class="token comment">/**
     * 注入ID为spElConstant Bean中的STR常量/变量
     */</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;#{spElConstant.name}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token comment">/**
     * 调用无参方法
     */</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;#{spElConstant.showProperty()}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> method1<span class="token punctuation">;</span>
    <span class="token comment">/**
     * 有参接收字符串的方法
     */</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;#{spElConstant.showProperty('Hell SpringEL')}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> method2<span class="token punctuation">;</span>
    <span class="token comment">/**
     * 方法返回的String为大写
     */</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;#{spElConstant.showProperty().toUpperCase()}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> method3<span class="token punctuation">;</span>
    <span class="token comment">/**
     * 若使用method3这种方式，若果showProperty返回为null
     * 将会抛出NullPointerException,可以使用以下方式避免
     * 使用?.符号代表若然左边的值为null，将不执行右边方法
     */</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;#{spElConstant.showProperty()?.toUpperCase()}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> method4<span class="token punctuation">;</span>
    <span class="token comment">/**
     * 注入math常量
     */</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;#{T(java.lang.Math).PI}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> pi<span class="token punctuation">;</span>
    <span class="token comment">/**
     * 用random方法获取返回值
     */</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;#{T(java.lang.Math).random()}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> random<span class="token punctuation">;</span>
    <span class="token comment">/**
     * 获取文件路径符号
     */</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;#{T(java.io.File).separator}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> separator<span class="token punctuation">;</span>
    <span class="token comment">/**
     * 拼接字符串
     */</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;#{spElConstant.nickname + ' ' + spElConstant.name}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> concatString<span class="token punctuation">;</span>
    <span class="token comment">/**
     * 对数字类型进行运算,spElConstant拥有num属性
     */</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;#{3 * T(java.lang.Math).PI + spElConstant.num}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> operation<span class="token punctuation">;</span>
    <span class="token comment">/**
     * 进行逻辑运算
     */</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;#{spElConstant.num &gt; 100 and spElConstant.num &lt;= 200}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">boolean</span> logicOperation<span class="token punctuation">;</span>
    <span class="token comment">/**
     * 进行或非逻辑操作
     */</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;#{not (spElConstant.num == 100) or spElConstant.num &lt;= 200}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">boolean</span> logicOperation2<span class="token punctuation">;</span>
    <span class="token comment">/**
     * 使用三元运算符
     */</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;#{spElConstant.num &gt; 100 ? spElConstant.num : spElConstant.num + 100}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> logicOperation3<span class="token punctuation">;</span>
    <span class="token comment">/**
     * 获取下标为0的元素
     */</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;#{spElConstant.product[0]}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> str<span class="token punctuation">;</span>
    <span class="token comment">/**
     * 获取下标为0元素的大写形式
     */</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;#{spElConstant.product[0]?.toUpperCase()}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> upperStr<span class="token punctuation">;</span>
    <span class="token comment">/**
     * 获取map中key为hello的value
     */</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;#{spElConstant.productMap['hello']}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> mapValue<span class="token punctuation">;</span>
    <span class="token comment">/**
     * 根据product下标为0元素作为key获取testMap的value
     */</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;#{spElConstant.productMap[spElConstant.product[0]]}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> mapStrByproduct<span class="token punctuation">;</span>
    <span class="token comment">/**
     * 注入人口大于等于1000人口的城市
     */</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;#{spElConstant.cityList.?[population &gt;= 1000]}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SpElConstant<span class="token punctuation">.</span>City</span><span class="token punctuation">&gt;</span></span> cityList<span class="token punctuation">;</span>
    <span class="token comment">/**
     * 注入人口等于900人口的城市
     */</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;#{spElConstant.cityList.?[population == 900]}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">SpElConstant<span class="token punctuation">.</span>City</span> city<span class="token punctuation">;</span>
    <span class="token comment">/**
     * 注入人口大于等于1000人口的城市，且只保留城市名称
     */</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;#{spElConstant.cityList.?[population &gt;= 1000].![name]}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> cityName<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="7"><li>注入结果</li></ol> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;spElConstant&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SpElConstant-name&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;nickname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tianxin&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;num&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
		<span class="token property">&quot;product&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;huaweiMate30Pro&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;xiaomi10x5g&quot;</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token property">&quot;productMap&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token property">&quot;xiaomi10x5g&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4999&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;huaweiMate30Pro&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5999&quot;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token property">&quot;cityList&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token punctuation">{</span>
				<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;深圳&quot;</span><span class="token punctuation">,</span>
				<span class="token property">&quot;population&quot;</span><span class="token operator">:</span> <span class="token number">1000</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">{</span>
				<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;杭州&quot;</span><span class="token punctuation">,</span>
				<span class="token property">&quot;population&quot;</span><span class="token operator">:</span> <span class="token number">2000</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">{</span>
				<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;贵阳&quot;</span><span class="token punctuation">,</span>
				<span class="token property">&quot;population&quot;</span><span class="token operator">:</span> <span class="token number">900</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SpElConstant-name&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;method1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;showProperty-无参数&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;method2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;showProperty-Hell SpringEL&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;method3&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SHOWPROPERTY-无参数&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;method4&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SHOWPROPERTY-无参数&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;pi&quot;</span><span class="token operator">:</span> <span class="token number">3.141592653589793</span><span class="token punctuation">,</span>
	<span class="token property">&quot;random&quot;</span><span class="token operator">:</span> <span class="token number">0.19997238292235787</span><span class="token punctuation">,</span>
	<span class="token property">&quot;separator&quot;</span><span class="token operator">:</span> <span class="token string">&quot;\\&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;concatString&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tianxin SpElConstant-name&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;operation&quot;</span><span class="token operator">:</span> <span class="token number">109.42477796076938</span><span class="token punctuation">,</span>
	<span class="token property">&quot;logicOperation&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	<span class="token property">&quot;logicOperation2&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
	<span class="token property">&quot;logicOperation3&quot;</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
	<span class="token property">&quot;str&quot;</span><span class="token operator">:</span> <span class="token string">&quot;huaweiMate30Pro&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;upperStr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;HUAWEIMATE30PRO&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;mapValue&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
	<span class="token property">&quot;mapStrByproduct&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5999&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;cityList&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{</span>
			<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;深圳&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;population&quot;</span><span class="token operator">:</span> <span class="token number">1000</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span>
			<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;杭州&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;population&quot;</span><span class="token operator">:</span> <span class="token number">2000</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;贵阳&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;population&quot;</span><span class="token operator">:</span> <span class="token number">900</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">&quot;cityName&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token string">&quot;深圳&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;杭州&quot;</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="8"><li>Spring操作外部Properties文件</li></ol> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token key attr-name">&lt;!--</span> <span class="token value attr-value">首先通过applicaContext.xml中&lt;util:properties&gt;增加properties文件 --&gt;</span>
<span class="token key attr-name">&lt;!--</span> <span class="token value attr-value">注意需要引入Spring的util schemea命名空间和注意id属性,id属性将在SpringEL中使用 --&gt;</span>
<span class="token key attr-name">&lt;util</span><span class="token punctuation">:</span><span class="token value attr-value">properties id=&quot;db&quot; location=&quot;classpath:application.properties&quot;/&gt;x</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestSpringEL</span> <span class="token punctuation">{</span>
	<span class="token comment">// 注意db为xml文件中声明的id</span>
	<span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;#{db['jdbc.url']}&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">private</span> <span class="token class-name">String</span> propertiesValue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="9"><li>SpringEL在使用时仅仅是一个字符串，不易于排错与测试，也没有IDE检查我们的语法，当出现错误时较难检测，复杂的表达式不建议通过SpringEL方式注入。在非必要情况下，不推荐使用SpEl的复杂注入，清晰可读的代码更为重要且有利于排查问题</li></ol> <h2 id="属性自动注入"><a href="#属性自动注入" class="header-anchor">#</a> 属性自动注入</h2> <ol><li>上述都是通过指定字段进行注入，可以通过@ConfigurationProperties指定前缀进行自动注入</li></ol> <ul><li>org.springframework.boot.context.properties.ConfigurationProperties</li></ul> <ol start="2"><li>配置类</li></ol> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">user</span><span class="token punctuation">:</span>
  <span class="token key atrule">id</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>random.uuid<span class="token punctuation">}</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> autowire
  <span class="token key atrule">address</span><span class="token punctuation">:</span> unknown
  <span class="token key atrule">website</span><span class="token punctuation">:</span> www.codecoord.com
  <span class="token key atrule">age</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>random.int<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>自动属性注入类
<ul><li>通过prefix指定前端为user，然后将会把user.后的类型按照名称进行注入</li> <li>注意必须要提供setter方法</li></ul></li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>context<span class="token punctuation">.</span>properties<span class="token punctuation">.</span></span><span class="token class-name">ConfigurationProperties</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserConfig</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> website<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="4"><li>可以通过@EnableConfigurationProperties(value = UserConfig.class)将UserConfig再次强制注入，问题出现在如果UserConfig为第三方jar包内的配置类，则可能出现属性没有注入情况，所以可以指定注入</li></ol> <blockquote><p>转自 <a href="https://juejin.cn/post/6987993458807930893" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/6987993458807930893<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/框架/Spring/集成本地缓存.html">
        集成本地缓存
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.becc5145.js" defer></script><script src="/assets/js/2.8a031f56.js" defer></script><script src="/assets/js/47.3c3fcf46.js" defer></script>
  </body>
</html>
