<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>简介 | Sugar</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/logo.jpg">
    <meta name="description" content="Sugar">
    
    <link rel="preload" href="/assets/css/0.styles.e8e4f3a3.css" as="style"><link rel="preload" href="/assets/js/app.540aeaec.js" as="script"><link rel="preload" href="/assets/js/2.c3162e30.js" as="script"><link rel="preload" href="/assets/js/44.d1bce4cc.js" as="script"><link rel="prefetch" href="/assets/js/10.9e12a450.js"><link rel="prefetch" href="/assets/js/11.9a2889a3.js"><link rel="prefetch" href="/assets/js/12.331855f5.js"><link rel="prefetch" href="/assets/js/13.c0a595e0.js"><link rel="prefetch" href="/assets/js/14.71cd8cbc.js"><link rel="prefetch" href="/assets/js/15.b5799bea.js"><link rel="prefetch" href="/assets/js/16.2ca2deb5.js"><link rel="prefetch" href="/assets/js/17.19608163.js"><link rel="prefetch" href="/assets/js/18.4dc79ea4.js"><link rel="prefetch" href="/assets/js/19.3fecadec.js"><link rel="prefetch" href="/assets/js/20.071d9b83.js"><link rel="prefetch" href="/assets/js/21.353c4514.js"><link rel="prefetch" href="/assets/js/22.5f92fa4d.js"><link rel="prefetch" href="/assets/js/23.da4f507b.js"><link rel="prefetch" href="/assets/js/24.cff90518.js"><link rel="prefetch" href="/assets/js/25.c203e8fb.js"><link rel="prefetch" href="/assets/js/26.51d41395.js"><link rel="prefetch" href="/assets/js/27.0a75ba43.js"><link rel="prefetch" href="/assets/js/28.73269734.js"><link rel="prefetch" href="/assets/js/29.d65c78d6.js"><link rel="prefetch" href="/assets/js/3.b1ad3da4.js"><link rel="prefetch" href="/assets/js/30.230a8bdb.js"><link rel="prefetch" href="/assets/js/31.dea786d9.js"><link rel="prefetch" href="/assets/js/32.6321160c.js"><link rel="prefetch" href="/assets/js/33.02db866e.js"><link rel="prefetch" href="/assets/js/34.2eb6f7f1.js"><link rel="prefetch" href="/assets/js/35.4107ba8c.js"><link rel="prefetch" href="/assets/js/36.8cba08f9.js"><link rel="prefetch" href="/assets/js/37.20e0212a.js"><link rel="prefetch" href="/assets/js/38.c609627a.js"><link rel="prefetch" href="/assets/js/39.1a9aeb64.js"><link rel="prefetch" href="/assets/js/4.6b930ecf.js"><link rel="prefetch" href="/assets/js/40.026a1012.js"><link rel="prefetch" href="/assets/js/41.06893ddd.js"><link rel="prefetch" href="/assets/js/42.61775a53.js"><link rel="prefetch" href="/assets/js/43.a42a2f61.js"><link rel="prefetch" href="/assets/js/45.cf75fd2f.js"><link rel="prefetch" href="/assets/js/46.dbaf81a4.js"><link rel="prefetch" href="/assets/js/47.e8e06829.js"><link rel="prefetch" href="/assets/js/48.20fd7187.js"><link rel="prefetch" href="/assets/js/49.57e01b43.js"><link rel="prefetch" href="/assets/js/5.cc709946.js"><link rel="prefetch" href="/assets/js/50.db1068e7.js"><link rel="prefetch" href="/assets/js/51.eef5740d.js"><link rel="prefetch" href="/assets/js/52.02ce20d0.js"><link rel="prefetch" href="/assets/js/53.c25129d6.js"><link rel="prefetch" href="/assets/js/54.2e6e9a45.js"><link rel="prefetch" href="/assets/js/55.a4b6f932.js"><link rel="prefetch" href="/assets/js/56.7fab891a.js"><link rel="prefetch" href="/assets/js/57.97487f10.js"><link rel="prefetch" href="/assets/js/58.5ced0303.js"><link rel="prefetch" href="/assets/js/59.792820e4.js"><link rel="prefetch" href="/assets/js/6.2473f399.js"><link rel="prefetch" href="/assets/js/60.262706a9.js"><link rel="prefetch" href="/assets/js/61.d4e2e202.js"><link rel="prefetch" href="/assets/js/62.f5b09c56.js"><link rel="prefetch" href="/assets/js/63.e1112c2c.js"><link rel="prefetch" href="/assets/js/64.fb088828.js"><link rel="prefetch" href="/assets/js/65.4d8da7f9.js"><link rel="prefetch" href="/assets/js/66.6f644173.js"><link rel="prefetch" href="/assets/js/67.c19dbcc3.js"><link rel="prefetch" href="/assets/js/68.ce487c24.js"><link rel="prefetch" href="/assets/js/69.ada4c63b.js"><link rel="prefetch" href="/assets/js/7.9358edd5.js"><link rel="prefetch" href="/assets/js/70.3a9acc1f.js"><link rel="prefetch" href="/assets/js/71.bc418a50.js"><link rel="prefetch" href="/assets/js/72.75d8d9b1.js"><link rel="prefetch" href="/assets/js/73.25fadb33.js"><link rel="prefetch" href="/assets/js/74.47de0ebc.js"><link rel="prefetch" href="/assets/js/75.9cf729b0.js"><link rel="prefetch" href="/assets/js/76.4ada3539.js"><link rel="prefetch" href="/assets/js/77.b545785a.js"><link rel="prefetch" href="/assets/js/78.ce47d46c.js"><link rel="prefetch" href="/assets/js/8.588ab7c5.js"><link rel="prefetch" href="/assets/js/9.465e7e2c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e8e4f3a3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Sugar</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Java/" class="nav-link">
  Java
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  VUE
</a></li><li class="dropdown-item"><!----> <a href="/数据库/ElasticSearch/ES知识体系.html" class="nav-link">
  Flutter
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          SQL数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/数据库/MySQL/MySQL目录结构.html" class="nav-link">
  MySQL
</a></li></ul></li><li class="dropdown-item"><h4>
          NoSQL数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  Redis
</a></li><li class="dropdown-subitem"><a href="/数据库/ElasticSearch/ES知识体系.html" class="nav-link">
  ElasticSearch
</a></li><li class="dropdown-subitem"><a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  MangoDB
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          后端框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  MyBatis
</a></li><li class="dropdown-subitem"><a href="/框架/Spring/SpEL&amp;EL表达式.html" class="nav-link">
  Spring
</a></li><li class="dropdown-subitem"><a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  SpringBoot
</a></li><li class="dropdown-subitem"><a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  SpringCloud
</a></li><li class="dropdown-subitem"><a href="/框架/Activiti/Activiti介绍.html" class="nav-link">
  Activiti
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><span class="title">中间件</span> <span class="arrow down"></span></button> <button type="button" aria-label="中间件" class="mobile-dropdown-title"><span class="title">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          服务器
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/中间件/Nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-subitem"><a href="/中间件/Tomcat/" class="nav-link">
  Tomcat
</a></li><li class="dropdown-subitem"><a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  Netty
</a></li><li class="dropdown-subitem"><a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  Nacos
</a></li><li class="dropdown-subitem"><a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  OSS
</a></li></ul></li><li class="dropdown-item"><h4>
          消息队列
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  RabbitMQ
</a></li><li class="dropdown-subitem"><a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  Kafka
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  架构
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><span class="title">运维</span> <span class="arrow down"></span></button> <button type="button" aria-label="运维" class="mobile-dropdown-title"><span class="title">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/运维/Linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  K8S
</a></li><li class="dropdown-item"><!----> <a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  CI/CD
</a></li><li class="dropdown-item"><!----> <a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  DevOps
</a></li><li class="dropdown-item"><!----> <a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  监控
</a></li><li class="dropdown-item"><!----> <a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  日志收集
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Java/" class="nav-link">
  Java
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  VUE
</a></li><li class="dropdown-item"><!----> <a href="/数据库/ElasticSearch/ES知识体系.html" class="nav-link">
  Flutter
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          SQL数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/数据库/MySQL/MySQL目录结构.html" class="nav-link">
  MySQL
</a></li></ul></li><li class="dropdown-item"><h4>
          NoSQL数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  Redis
</a></li><li class="dropdown-subitem"><a href="/数据库/ElasticSearch/ES知识体系.html" class="nav-link">
  ElasticSearch
</a></li><li class="dropdown-subitem"><a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  MangoDB
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          后端框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  MyBatis
</a></li><li class="dropdown-subitem"><a href="/框架/Spring/SpEL&amp;EL表达式.html" class="nav-link">
  Spring
</a></li><li class="dropdown-subitem"><a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  SpringBoot
</a></li><li class="dropdown-subitem"><a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  SpringCloud
</a></li><li class="dropdown-subitem"><a href="/框架/Activiti/Activiti介绍.html" class="nav-link">
  Activiti
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><span class="title">中间件</span> <span class="arrow down"></span></button> <button type="button" aria-label="中间件" class="mobile-dropdown-title"><span class="title">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          服务器
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/中间件/Nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-subitem"><a href="/中间件/Tomcat/" class="nav-link">
  Tomcat
</a></li><li class="dropdown-subitem"><a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  Netty
</a></li><li class="dropdown-subitem"><a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  Nacos
</a></li><li class="dropdown-subitem"><a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  OSS
</a></li></ul></li><li class="dropdown-item"><h4>
          消息队列
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  RabbitMQ
</a></li><li class="dropdown-subitem"><a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  Kafka
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  架构
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><span class="title">运维</span> <span class="arrow down"></span></button> <button type="button" aria-label="运维" class="mobile-dropdown-title"><span class="title">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/运维/Linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  K8S
</a></li><li class="dropdown-item"><!----> <a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  CI/CD
</a></li><li class="dropdown-item"><!----> <a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  DevOps
</a></li><li class="dropdown-item"><!----> <a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  监控
</a></li><li class="dropdown-item"><!----> <a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/ElasticSearch/.html" class="nav-link">
  日志收集
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>ElasticSearch</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/数据库/ElasticSearch/ES知识体系.html" class="sidebar-link">ES知识体系</a></li><li><a href="/数据库/ElasticSearch/ES基础-介绍.html" class="sidebar-link">ES基础-介绍</a></li><li><a href="/数据库/ElasticSearch/ES基础-生态和场景方案.html" class="sidebar-link">ES基础-生态和场景方案</a></li><li><a href="/数据库/ElasticSearch/ES入门-ES安装及HTTP操作.html" class="sidebar-link">ES入门-ES安装及HTTP操作</a></li><li><a href="/数据库/ElasticSearch/ES入门-文档评分机制.html" class="sidebar-link">ES入门-文档评分机制</a></li><li><a href="/数据库/ElasticSearch/ES入门-JAVA操作.html" class="sidebar-link">ES入门-JAVA操作</a></li><li><a href="/数据库/ElasticSearch/ES进阶-核心概念.html" class="sidebar-link">ES进阶-核心概念</a></li><li><a href="/数据库/ElasticSearch/ES进阶-系统架构.html" class="sidebar-link">ES进阶-系统架构</a></li><li><a href="/数据库/ElasticSearch/ES进阶-EQL操作.html" class="sidebar-link">ES进阶-EQL操作</a></li><li><a href="/数据库/ElasticSearch/ES进阶-SQL操作.html" class="active sidebar-link">ES进阶-SQL操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/数据库/ElasticSearch/ES进阶-SQL操作.html#简介" class="sidebar-link">简介</a></li><li class="sidebar-sub-header"><a href="/数据库/ElasticSearch/ES进阶-SQL操作.html#sql-和-elasticsearch-的对应关系" class="sidebar-link">SQL 和 Elasticsearch 的对应关系</a></li><li class="sidebar-sub-header"><a href="/数据库/ElasticSearch/ES进阶-SQL操作.html#数据准备" class="sidebar-link">数据准备</a></li><li class="sidebar-sub-header"><a href="/数据库/ElasticSearch/ES进阶-SQL操作.html#sql查询" class="sidebar-link">SQL查询</a></li><li class="sidebar-sub-header"><a href="/数据库/ElasticSearch/ES进阶-SQL操作.html#sql转为dsl" class="sidebar-link">SQL转为DSL</a></li><li class="sidebar-sub-header"><a href="/数据库/ElasticSearch/ES进阶-SQL操作.html#sql和dsl混用" class="sidebar-link">SQL和DSL混用</a></li><li class="sidebar-sub-header"><a href="/数据库/ElasticSearch/ES进阶-SQL操作.html#常用sql操作" class="sidebar-link">常用SQL操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/数据库/ElasticSearch/ES进阶-SQL操作.html#查询所有索引" class="sidebar-link">查询所有索引</a></li><li class="sidebar-sub-header"><a href="/数据库/ElasticSearch/ES进阶-SQL操作.html#查询指定索引" class="sidebar-link">查询指定索引</a></li><li class="sidebar-sub-header"><a href="/数据库/ElasticSearch/ES进阶-SQL操作.html#模糊查询索引" class="sidebar-link">模糊查询索引</a></li><li class="sidebar-sub-header"><a href="/数据库/ElasticSearch/ES进阶-SQL操作.html#查看索引结构" class="sidebar-link">查看索引结构</a></li><li class="sidebar-sub-header"><a href="/数据库/ElasticSearch/ES进阶-SQL操作.html#基础查询操作" class="sidebar-link">基础查询操作</a></li><li class="sidebar-sub-header"><a href="/数据库/ElasticSearch/ES进阶-SQL操作.html#支持的函数和运算" class="sidebar-link">支持的函数和运算</a></li></ul></li></ul></li><li><a href="/数据库/ElasticSearch/ES进阶-SQL客户端DataGrip.html" class="sidebar-link">ES进阶-SQL客户端DataGrip</a></li><li><a href="/数据库/ElasticSearch/ES进阶-自然语言处理NLP.html" class="sidebar-link">ES进阶-自然语言处理NLP</a></li><li><a href="/数据库/ElasticSearch/中文分词封装-TokenizerUtil.html" class="sidebar-link">中文分词封装-TokenizerUtil</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h2> <blockquote><p>一般使用 Elasticsearch 的时候，会使用 Query DSL 来查询数据，从 Elasticsearch6.3 版本以后，Elasticsearch 已经支持 SQL 查询了。</p> <p>Elasticsearch SQL 是一个 X-Pack 组件，它允许针对 Elasticsearch 实时执行类似 SQL 的查询。无论使用 REST 接口，命令行还是 JDBC，任何客户端都可以使用 SQL 对 Elasticsearch中的数据进行原生搜索和聚合数据。可以将 Elasticsearch SQL 看作是一种翻译器，它可以将SQL 翻译成 Query DSL</p></blockquote> <p>Elasticsearch SQL 具有如下特性：</p> <p>（1）原生支持：Elasticsearch SQL 是专门为 Elasticsearch 打造的</p> <p>（2）没有额外的零件：无需其他硬件，处理器，运行环境或依赖库即可查询 Elasticsearch，Elasticsearch SQL 直接在 Elasticsearch 内部运行</p> <p>（3）轻巧高效：Elasticsearch SQL 并未抽象化其搜索功能，相反的它拥抱并接受了 SQL 来实现全文搜索，以简洁的方式实时运行全文搜索</p> <h2 id="sql-和-elasticsearch-的对应关系"><a href="#sql-和-elasticsearch-的对应关系" class="header-anchor">#</a> SQL 和 Elasticsearch 的对应关系</h2> <table><thead><tr><th>SQL</th> <th>Elasticsearch</th> <th>描述</th></tr></thead> <tbody><tr><td>Column</td> <td>field</td> <td>对比两个，数据都存储在命名条目中，具有多种数据类型，包含一个值。SQL 将此类条目称为列，而 Elasticsearch 称为字段。请注意，在 Elasticsearch 中，一个字段可以包含多个相同类型的值（本质上是一个列表），而在 SQL 中，一个列可以只包含一个所述类型的值。Elasticsearch SQL 将尽最大努力保留 SQL 语义，并根据查询拒绝那些返回具有多个值的字段的查询</td></tr> <tr><td>Row</td> <td>Document</td> <td>Columns 和 fields 本身不存在；它们是 row 或 a 的一部分 document。两者的语义略有不同：row 趋于严格（并且有更多的强制执行），而document 趋于更加灵活或松散（同时仍然具有结构）</td></tr> <tr><td>Table</td> <td>Index</td> <td>执行查询的目标</td></tr> <tr><td>Schema</td> <td>Mapping</td> <td>在 RDBMS 中，schem 主要是表的命名空间，通常用作安全边界。Elasticsearch 没有为它提供等效的概念。但是，当启用安全性时，Elasticsearch 会自动应用安全性强制，以便角色只能看到它被允许访问的数据</td></tr> <tr><td>Database</td> <td>Cluster实例</td> <td>在 SQL 中，catalog 或者 database 从概念上可以互换使用，表示一组模式，即多个表。在 Elasticsearch 中，可用的索引集被分组在一个cluster，语义也有所不同。database 本质上是另一个命名空间（可能对数据的存储方式有一些影响），而 Elasticsearch cluster 是一个运行时实例，或者更确切地说是一组至少一个 Elasticsearch 实例（通常是分布式运行）。在实践中，这意味着虽然在 SQL 中，一个实例中可能有多个目录，但在 Elasticsearch 中，一个目录仅限于一个</td></tr></tbody></table> <h2 id="数据准备"><a href="#数据准备" class="header-anchor">#</a> 数据准备</h2> <div class="language-json extra-class"><pre class="language-json"><code>PUT my-sql-index
# 创建索引并增加数据，等同于创建表和数据
PUT my-sql-index/_bulk?refresh
<span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;JAVA&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;JAVA&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;author&quot;</span><span class="token operator">:</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;release_date&quot;</span><span class="token operator">:</span><span class="token string">&quot;2022-05-01&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;page_count&quot;</span><span class="token operator">:</span><span class="token number">561</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;BIGDATA&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;BIGDATA&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;author&quot;</span><span class="token operator">:</span><span class="token string">&quot;lisi&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;release_date&quot;</span><span class="token operator">:</span><span class="token string">&quot;2022-05-02&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;page_count&quot;</span><span class="token operator">:</span><span class="token number">482</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;SCALA&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;SCALA&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;author&quot;</span><span class="token operator">:</span><span class="token string">&quot;wangwu&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;release_date&quot;</span><span class="token operator">:</span><span class="token string">&quot;2022-05-03&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;page_count&quot;</span><span class="token operator">:</span><span class="token number">604</span><span class="token punctuation">}</span>
</code></pre></div><h2 id="sql查询"><a href="#sql查询" class="header-anchor">#</a> SQL查询</h2> <div class="language-json extra-class"><pre class="language-json"><code># SQL
# 这里的表就是索引
# 可以通过 format 参数控制返回结果的格式，默认为 json 格式
# txt<span class="token operator">:</span>表示文本格式，看起来更直观点.
# csv<span class="token operator">:</span>使用逗号隔开的数据
# json<span class="token operator">:</span>JSON 格式数据
# tsv<span class="token operator">:</span> 使用 tab 键隔开数据
# yaml<span class="token operator">:</span>属性配置格式
POST _sql?format=txt
<span class="token punctuation">{</span>
 <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>&quot;
 SELECT * FROM <span class="token string">&quot;my-sql-index&quot;</span>
 <span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">}</span>

结果：
    author     |     name      |  page_count   |      release_date      
---------------+---------------+---------------+------------------------
zhangsan       |JAVA           |<span class="token number">561</span>            |<span class="token number">2022</span><span class="token number">-05</span>-01T00<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span>.000Z
lisi           |BIGDATA        |<span class="token number">482</span>            |<span class="token number">2022</span><span class="token number">-05</span>-02T00<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span>.000Z
wangwu         |SCALA          |<span class="token number">604</span>            |<span class="token number">2022</span><span class="token number">-05</span>-03T00<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span>.000Z


————————————————————————————————————————————————————————————————
# 条件查询
POST _sql?format=txt
<span class="token punctuation">{</span>
 <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>&quot;
 SELECT * FROM <span class="token string">&quot;my-sql-index&quot;</span> where page_count &gt; <span class="token number">500</span>
 <span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">}</span>

结果：
    author     |     name      |  page_count   |      release_date      
---------------+---------------+---------------+------------------------
zhangsan       |JAVA           |<span class="token number">561</span>            |<span class="token number">2022</span><span class="token number">-05</span>-01T00<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span>.000Z
wangwu         |SCALA          |<span class="token number">604</span>            |<span class="token number">2022</span><span class="token number">-05</span>-03T00<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span>.000Z

</code></pre></div><h2 id="sql转为dsl"><a href="#sql转为dsl" class="header-anchor">#</a> SQL转为DSL</h2> <div class="language-json extra-class"><pre class="language-json"><code># 转换 SQL 为 DSL 进行操作
POST _sql/translate
<span class="token punctuation">{</span>
 <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>&quot;
 SELECT * FROM <span class="token string">&quot;my-sql-index&quot;</span> where page_count &gt; <span class="token number">500</span>
 <span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">}</span>

结果：
<span class="token punctuation">{</span>
  <span class="token property">&quot;size&quot;</span> <span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
  <span class="token property">&quot;query&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;range&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;page_count&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;from&quot;</span> <span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span>
        <span class="token property">&quot;to&quot;</span> <span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
        <span class="token property">&quot;include_lower&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token property">&quot;include_upper&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token property">&quot;boost&quot;</span> <span class="token operator">:</span> <span class="token number">1.0</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_source&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fields&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;field&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;author&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;field&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;name&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;field&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;page_count&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;field&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;release_date&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;format&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;strict_date_optional_time_nanos&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sort&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;_doc&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;order&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;asc&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="sql和dsl混用"><a href="#sql和dsl混用" class="header-anchor">#</a> SQL和DSL混用</h2> <div class="language-json extra-class"><pre class="language-json"><code># SQL 和 DSL 混合使用
# 由于索引中含有横线，所以作为表名时需要采用双引号，且外层需要三个引号包含
POST _sql?format=txt
<span class="token punctuation">{</span>
 <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>&quot;SELECT * FROM <span class="token string">&quot;my-sql-index&quot;</span> <span class="token string">&quot;&quot;</span>&quot;<span class="token punctuation">,</span>
 <span class="token property">&quot;filter&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
 <span class="token property">&quot;range&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
 <span class="token property">&quot;page_count&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
 <span class="token property">&quot;gte&quot;</span><span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span>
 <span class="token property">&quot;lte&quot;</span><span class="token operator">:</span> <span class="token number">600</span>
 <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token property">&quot;fetch_size&quot;</span><span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span>

结果：
    author     |     name      |  page_count   |      release_date      
---------------+---------------+---------------+------------------------
zhangsan       |JAVA           |<span class="token number">561</span>            |<span class="token number">2022</span><span class="token number">-05</span>-01T00<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span>.000Z
lisi           |BIGDATA        |<span class="token number">482</span>            |<span class="token number">2022</span><span class="token number">-05</span>-02T00<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span>.000Z
</code></pre></div><h2 id="常用sql操作"><a href="#常用sql操作" class="header-anchor">#</a> 常用SQL操作</h2> <h3 id="查询所有索引"><a href="#查询所有索引" class="header-anchor">#</a> 查询所有索引</h3> <div class="language-json extra-class"><pre class="language-json"><code>GET _sql?format=txt
<span class="token punctuation">{</span>
 <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>&quot;
 show tables
 <span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">}</span>

结果：
#! this request accesses system indices<span class="token operator">:</span> <span class="token punctuation">[</span>.kibana_task_manager_7.<span class="token number">12</span>.0_001<span class="token punctuation">,</span> .security<span class="token number">-7</span><span class="token punctuation">,</span> .kibana_7.<span class="token number">12</span>.0_001<span class="token punctuation">,</span> .transform-internal<span class="token number">-006</span><span class="token punctuation">]</span><span class="token punctuation">,</span> but in a future major version<span class="token punctuation">,</span> direct access to system indices will be prevented by default
#! this request accesses system indices<span class="token operator">:</span> <span class="token punctuation">[</span>.apm-agent-configuration<span class="token punctuation">,</span> .apm-custom-link<span class="token punctuation">,</span> .async-search<span class="token punctuation">,</span> .kibana_7.<span class="token number">12</span>.0_001<span class="token punctuation">,</span> .kibana_task_manager_7.<span class="token number">12</span>.0_001<span class="token punctuation">,</span> .security<span class="token number">-7</span><span class="token punctuation">,</span> .tasks<span class="token punctuation">,</span> .transform-internal<span class="token number">-006</span><span class="token punctuation">]</span><span class="token punctuation">,</span> but in a future major version<span class="token punctuation">,</span> direct access to system indices will be prevented by default
                  name                   |     type      |     kind      
-----------------------------------------+---------------+---------------
.apm-agent-configuration                 |TABLE          |INDEX          
.apm-custom-link                         |TABLE          |INDEX          
.async-search                            |TABLE          |INDEX          
.data-frame-internal<span class="token number">-3</span>                   |VIEW           |ALIAS          
.kibana                                  |VIEW           |ALIAS          
.kibana-event-log<span class="token number">-7.12</span>.<span class="token number">0</span>                 |VIEW           |ALIAS          
.kibana-event-log<span class="token number">-7.12</span>.<span class="token number">0</span><span class="token number">-000001</span>          |TABLE          |INDEX          
.kibana_7.<span class="token number">12.0</span>                           |VIEW           |ALIAS          
.kibana_7.<span class="token number">12</span>.0_001                       |TABLE          |INDEX          
.kibana_task_manager                     |VIEW           |ALIAS          
.kibana_task_manager_7.<span class="token number">12.0</span>              |VIEW           |ALIAS          
.kibana_task_manager_7.<span class="token number">12</span>.0_001          |TABLE          |INDEX          
.security                                |VIEW           |ALIAS          
.security<span class="token number">-7</span>                              |TABLE          |INDEX          
.tasks                                   |TABLE          |INDEX          
.transform-internal<span class="token number">-006</span>                  |TABLE          |INDEX          
animal                                   |TABLE          |INDEX          
employee                                 |TABLE          |INDEX          
gmall                                    |TABLE          |INDEX          
kibana_sample_data_ecommerce             |TABLE          |INDEX          
metrics-endpoint.metadata_current_default|TABLE          |INDEX          
my-sql-index                             |TABLE          |INDEX          
my_temp_2                                |TABLE          |INDEX          
my_temp_3                                |TABLE          |INDEX          
shopping                                 |TABLE          |INDEX          
test_score                               |TABLE          |INDEX          
test_temp_2                              |TABLE          |INDEX          
</code></pre></div><h3 id="查询指定索引"><a href="#查询指定索引" class="header-anchor">#</a> 查询指定索引</h3> <div class="language-JSON extra-class"><pre class="language-json"><code>GET _sql?format=txt
<span class="token punctuation">{</span>
 <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>&quot;
 show tables like 'shop'
 <span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">}</span>

结果：
     name      |     type      |     kind      
---------------+---------------+---------------
</code></pre></div><h3 id="模糊查询索引"><a href="#模糊查询索引" class="header-anchor">#</a> 模糊查询索引</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>GET _sql?format<span class="token operator">=</span>txt
<span class="token punctuation">{</span>
 <span class="token string">&quot;query&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>&quot;
 show tables like <span class="token string">'%shop%'</span>
 <span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">}</span>

结果：
     name      <span class="token operator">|</span>     <span class="token builtin class-name">type</span>      <span class="token operator">|</span>     kind      
---------------+---------------+---------------
shopping       <span class="token operator">|</span>TABLE          <span class="token operator">|</span>INDEX          
</code></pre></div><h3 id="查看索引结构"><a href="#查看索引结构" class="header-anchor">#</a> 查看索引结构</h3> <div class="language-json extra-class"><pre class="language-json"><code>GET _sql?format=txt
<span class="token punctuation">{</span>
 <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>&quot;
 describe shopping
 <span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">}</span>

结果：
     column     |     type      |    mapping    
----------------+---------------+---------------
about           |VARCHAR        |text           
category        |VARCHAR        |text           
category.keyword|VARCHAR        |keyword        
images          |VARCHAR        |text           
images.keyword  |VARCHAR        |keyword        
price           |BIGINT         |long           
title           |VARCHAR        |text           
title.keyword   |VARCHAR        |keyword        
</code></pre></div><h3 id="基础查询操作"><a href="#基础查询操作" class="header-anchor">#</a> 基础查询操作</h3> <div class="language-json extra-class"><pre class="language-json"><code># 基本 SQL 格式
SELECT select_expr <span class="token punctuation">[</span><span class="token punctuation">,</span> ...<span class="token punctuation">]</span>
<span class="token punctuation">[</span> FROM table_name <span class="token punctuation">]</span>
<span class="token punctuation">[</span> WHERE condition <span class="token punctuation">]</span>
<span class="token punctuation">[</span> GROUP BY grouping_element <span class="token punctuation">[</span><span class="token punctuation">,</span> ...<span class="token punctuation">]</span> <span class="token punctuation">]</span>
<span class="token punctuation">[</span> HAVING condition<span class="token punctuation">]</span>
<span class="token punctuation">[</span> ORDER BY expression <span class="token punctuation">[</span> ASC | DESC <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> ...<span class="token punctuation">]</span> <span class="token punctuation">]</span>
<span class="token punctuation">[</span> LIMIT <span class="token punctuation">[</span> count <span class="token punctuation">]</span> <span class="token punctuation">]</span>
<span class="token punctuation">[</span> PIVOT ( aggregation_expr FOR column IN ( value <span class="token punctuation">[</span> <span class="token punctuation">[</span> AS <span class="token punctuation">]</span> alias <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> ...<span class="token punctuation">]</span> ) ) <span class="token punctuation">]</span>
</code></pre></div><p><strong>where</strong></p> <div class="language-json extra-class"><pre class="language-json"><code># 条件过滤
POST _sql?format=txt
<span class="token punctuation">{</span>
 <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>&quot; SELECT * FROM <span class="token string">&quot;my-sql-index&quot;</span> where name = 'JAVA' <span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">}</span>

结果：
    author     |     name      |  page_count   |      release_date      
---------------+---------------+---------------+------------------------
zhangsan       |JAVA           |<span class="token number">561</span>            |<span class="token number">2022</span><span class="token number">-05</span>-01T00<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span>.000Z
</code></pre></div><p><strong>group by</strong></p> <div class="language-json extra-class"><pre class="language-json"><code># 按照日期进行分组
GET _sql?format=txt
<span class="token punctuation">{</span>
 <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>&quot;
 SELECT release_date FROM <span class="token string">&quot;my-sql-index&quot;</span> group by release_date
 <span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">}</span>

结果：
      release_date      
------------------------
<span class="token number">2022</span><span class="token number">-05</span>-01T00<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span>.000Z
<span class="token number">2022</span><span class="token number">-05</span>-02T00<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span>.000Z
<span class="token number">2022</span><span class="token number">-05</span>-03T00<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span>.000Z
</code></pre></div><p><strong>having</strong></p> <div class="language-json extra-class"><pre class="language-json"><code># 对分组后的数据进行过滤
GET _sql?format=txt
<span class="token punctuation">{</span>
 <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>&quot;
 SELECT sum(page_count)<span class="token punctuation">,</span> release_date as datacnt FROM <span class="token string">&quot;my-sql-index&quot;</span> group 
by release_date having sum(page_count) &gt; <span class="token number">1000</span>
 <span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">}</span>

结果：
sum(page_count)|    datacnt    
---------------+---------------
</code></pre></div><p><strong>order by</strong></p> <div class="language-json extra-class"><pre class="language-json"><code># 对页面数量进行排序（降序）
GET _sql?format=txt
<span class="token punctuation">{</span>
 <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>&quot;
 select * from <span class="token string">&quot;my-sql-index&quot;</span> order by page_count desc
 <span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">}</span>

结果：
    author     |     name      |  page_count   |      release_date      
---------------+---------------+---------------+------------------------
wangwu         |SCALA          |<span class="token number">604</span>            |<span class="token number">2022</span><span class="token number">-05</span>-03T00<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span>.000Z
zhangsan       |JAVA           |<span class="token number">561</span>            |<span class="token number">2022</span><span class="token number">-05</span>-01T00<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span>.000Z
lisi           |BIGDATA        |<span class="token number">482</span>            |<span class="token number">2022</span><span class="token number">-05</span>-02T00<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span>.000Z
</code></pre></div><p><strong>limit</strong></p> <div class="language-JSON extra-class"><pre class="language-json"><code># 限定查询数量
GET _sql?format=txt
<span class="token punctuation">{</span>
 <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>&quot;
 select * from <span class="token string">&quot;my-sql-index&quot;</span> limit <span class="token number">3</span>
 <span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">}</span>

结果：
    author     |     name      |  page_count   |      release_date      
---------------+---------------+---------------+------------------------
zhangsan       |JAVA           |<span class="token number">561</span>            |<span class="token number">2022</span><span class="token number">-05</span>-01T00<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span>.000Z
lisi           |BIGDATA        |<span class="token number">482</span>            |<span class="token number">2022</span><span class="token number">-05</span>-02T00<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span>.000Z
wangwu         |SCALA          |<span class="token number">604</span>            |<span class="token number">2022</span><span class="token number">-05</span>-03T00<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span>.000Z
</code></pre></div><p><strong>cursor</strong></p> <p>游标（cursor）是系统为用户开设的一个数据缓冲区，存储 sql 语句的执行结果，每个游标区都有一个名字，用户可以用 sql 语句逐一从游标中获取记录，并赋给主变量，交由主语言进一步处理。就本质而言，游标实际上是一种能从包括多条数据记录的结果集中每次提取一条或多条记录的机制</p> <div class="language-json extra-class"><pre class="language-json"><code># 查询数据
# 因为查询结果较多，但是获取的数据较少，所以为了提高效果，会将数据存储到临时缓冲区中
# 此处数据展示格式为 json
POST _sql?format=json
<span class="token punctuation">{</span>
 <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>&quot; SELECT * FROM <span class="token string">&quot;my-sql-index&quot;</span> order by page_count desc <span class="token string">&quot;&quot;</span>&quot;<span class="token punctuation">,</span>
 <span class="token property">&quot;fetch_size&quot;</span><span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span>

结果：
<span class="token punctuation">{</span>
  <span class="token property">&quot;columns&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;author&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;text&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;text&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;page_count&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;long&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;release_date&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;datetime&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;rows&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">&quot;wangwu&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;SCALA&quot;</span><span class="token punctuation">,</span>
      <span class="token number">604</span><span class="token punctuation">,</span>
      <span class="token string">&quot;2022-05-03T00:00:00.000Z&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>
      <span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;JAVA&quot;</span><span class="token punctuation">,</span>
      <span class="token number">561</span><span class="token punctuation">,</span>
      <span class="token string">&quot;2022-05-01T00:00:00.000Z&quot;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;cursor&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;48myAwFaAXN4RkdsdVkyeDFaR1ZmWTI5dWRHVjRkRjkxZFdsa0RYRjFaWEo1UVc1a1JtVjBZMmdCRm1rMVYwNTRORWxVVTBWVFZsOXlPV3hMZEdNMU1uY0FBQUFBQUFBOGhoWk5RM3BOVkRSTWRsSnhhVEZ5TW5OSE1uYzNhMnBu/////w8EAWYGYXV0aG9yAQR0ZXh0AAABZgRuYW1lAQR0ZXh0AAABZgpwYWdlX2NvdW50AQRsb25nAAABZgxyZWxlYXNlX2RhdGUBCGRhdGV0aW1lAAABDw==&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-JSON extra-class"><pre class="language-json"><code># 此处游标 cursor 值需要根据读者执行的操作进行修改，请勿直接使用
POST /_sql?format=json
<span class="token punctuation">{</span>
 <span class="token property">&quot;cursor&quot;</span><span class="token operator">:</span> 
&quot;<span class="token number">8</span>/LoA0RGTABEissKgkAYRh2QiAh8FZVcuExKaWisxEbHTUzO7wVH7TKSb19Gi87ig8N3UIaeox/
IgdmjlQW0YLY7iICuhO9aIpHNJvWtLMXOKXGaqKUms0vPb8wXSSJCtyE7N3JP2ggfKCZRjHdxmq9
/eFc8Zndi0wJoeGY0PJLOq7lZVWJrJXFaee8JQ0fFjA+q6h9IVzAqTUOF3vEW/rq48RIueT90Cum
y78pvs3yABP6Ei+AK0Py7qm5huowPAAAA<span class="token comment">//8DAA==&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-JSON extra-class"><pre class="language-json"><code># 此处游标 cursor 值需要根据读者执行的操作进行修改，请勿直接使用
POST _sql/close
<span class="token punctuation">{</span>
 <span class="token property">&quot;cursor&quot;</span><span class="token operator">:</span> 
&quot;<span class="token number">8</span>/LoA0RGTABEissKgkAYRh2QiAh8FZVcuExKaWisxEbHTUzO7wVH7TKSb19Gi87ig8N3UIaeox/
IgdmjlQW0YLY7iICuhO9aIpHNJvWtLMXOKXGaqKUms0vPb8wXSSJCtyE7N3JP2ggfKCZRjHdxmq9
/eFc8Zndi0wJoeGY0PJLOq7lZVWJrJXFaee8JQ0fFjA+q6h9IVzAqTUOF3vEW/rq48RIueT90Cum
y78pvs3yABP6Ei+AK0Py7qm5huowPAAAA<span class="token comment">//8DAA==&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>基础聚合查询</strong></p> <p>在 ES 中使用 SQL 查询的聚合语法与在数据库中使用基本一致</p> <p>Min、Max、Avg、Sum、Count(*)、Distinct</p> <div class="language-json extra-class"><pre class="language-json"><code>GET _sql?format=txt
<span class="token punctuation">{</span>
 <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>&quot;
 SELECT 
 MIN(page_count) min<span class="token punctuation">,</span> 
 MAX(page_count) max<span class="token punctuation">,</span> 
 AVG(page_count) avg<span class="token punctuation">,</span>
 SUM(page_count) sum<span class="token punctuation">,</span>
 COUNT(*) count<span class="token punctuation">,</span>
 COUNT(DISTINCT name) dictinct_count 
 FROM <span class="token string">&quot;my-sql-index&quot;</span>
 <span class="token string">&quot;&quot;</span>&quot;
<span class="token punctuation">}</span>

结果：
      min      |      max      |      avg      |      sum      |     count     |dictinct_count 
---------------+---------------+---------------+---------------+---------------+---------------
<span class="token number">482.0</span>          |<span class="token number">604.0</span>          |<span class="token number">549.0</span>          |<span class="token number">1647.0</span>         |<span class="token number">3</span>              |<span class="token number">3</span>              
</code></pre></div><h3 id="支持的函数和运算"><a href="#支持的函数和运算" class="header-anchor">#</a> 支持的函数和运算</h3> <p><strong>比较运算符</strong></p> <div class="language-json extra-class"><pre class="language-json"><code># Equality
SELECT * FROM <span class="token string">&quot;my-sql-index&quot;</span> WHERE name = 'JAVA'
# Null Safe Equality
SELECT 'elastic' &lt;=&gt; <span class="token null keyword">null</span> AS <span class="token string">&quot;equals&quot;</span>
SELECT <span class="token null keyword">null</span> &lt;=&gt; <span class="token null keyword">null</span> AS <span class="token string">&quot;equals&quot;</span>
# Inequality
SELECT * FROM <span class="token string">&quot;my-sql-index&quot;</span> WHERE name &lt;&gt; 'JAVA'
SELECT * FROM <span class="token string">&quot;my-sql-index&quot;</span> WHERE name != 'JAVA'
# Comparison
SELECT * FROM <span class="token string">&quot;my-sql-index&quot;</span> WHERE page_count &gt; <span class="token number">500</span>
SELECT * FROM <span class="token string">&quot;my-sql-index&quot;</span> WHERE page_count &gt;= <span class="token number">500</span>
SELECT * FROM <span class="token string">&quot;my-sql-index&quot;</span> WHERE page_count &lt; <span class="token number">500</span>
SELECT * FROM <span class="token string">&quot;my-sql-index&quot;</span> WHERE page_count &lt;= <span class="token number">500</span>
# BETWEEN
SELECT * FROM <span class="token string">&quot;my-sql-index&quot;</span> WHERE page_count between <span class="token number">100</span> and <span class="token number">500</span>
# Is Null / Is Not Null
SELECT * FROM <span class="token string">&quot;my-sql-index&quot;</span> WHERE name is not <span class="token null keyword">null</span>
SELECT * FROM <span class="token string">&quot;my-sql-index&quot;</span> WHERE name is <span class="token null keyword">null</span>
# IN
SELECT * FROM <span class="token string">&quot;my-sql-index&quot;</span> WHERE name in ('JAVA'<span class="token punctuation">,</span> 'SCALA')
</code></pre></div><p><strong>逻辑运算符</strong></p> <div class="language-json extra-class"><pre class="language-json"><code># AND
SELECT * FROM <span class="token string">&quot;my-sql-index&quot;</span> WHERE name = 'JAVA' AND page_count &gt; <span class="token number">100</span>
# OR
SELECT * FROM <span class="token string">&quot;my-sql-index&quot;</span> WHERE name = 'JAVA' OR name = 'SCALA'
# NOT
SELECT * FROM <span class="token string">&quot;my-sql-index&quot;</span> WHERE NOT name = 'JAVA'
</code></pre></div><p><strong>数学运算符</strong></p> <div class="language-json extra-class"><pre class="language-json"><code># 加减乘除
select <span class="token number">1</span> + <span class="token number">1</span> as x
select <span class="token number">1</span> - <span class="token number">1</span> as x
select - <span class="token number">1</span> as x
select <span class="token number">6</span> * <span class="token number">6</span> as x
select <span class="token number">30</span> / <span class="token number">5</span> as x
select <span class="token number">30</span> % <span class="token number">7</span> as x
</code></pre></div><p><strong>类型转换</strong></p> <div class="language-json extra-class"><pre class="language-json"><code># 类型转换
SELECT '<span class="token number">123</span>'<span class="token operator">:</span><span class="token operator">:</span>long AS long
</code></pre></div><p><strong>模糊查询</strong></p> <div class="language-json extra-class"><pre class="language-json"><code># LIKE 通配符
SELECT * FROM <span class="token string">&quot;my-sql-index&quot;</span> WHERE name like 'JAVA%'
SELECT * FROM <span class="token string">&quot;my-sql-index&quot;</span> WHERE name like 'JAVA_'
# 如果需要匹配通配符本身<span class="token punctuation">,</span>使用转义字符
SELECT * FROM <span class="token string">&quot;my-sql-index&quot;</span> WHERE name like 'JAVA/%' ESCAPE '/'
# RLIKE 不要误会，这里的 R 表示的不是方向，而是正则表示式 Regex
SELECT * FROM <span class="token string">&quot;my-sql-index&quot;</span> WHERE name like 'JAV*A'
SELECT * FROM <span class="token string">&quot;my-sql-index&quot;</span> WHERE name rlike 'JAV*A'
# 尽管 LIKE在 Elasticsearch SQL 中搜索或过滤时是一个有效的选项，但全文搜索 MATCH 和 QUERY
速度更快、功能更强大，并且是首选替代方案
</code></pre></div><p><strong>聚合分析函数</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># FIRST / FIRST_VALUE : FIRST(第一个字段，排序字段)</span>
SELECT first<span class="token punctuation">(</span>name, release_date<span class="token punctuation">)</span> FROM <span class="token string">&quot;my-sql-index&quot;</span>
SELECT first_value<span class="token punctuation">(</span>substring<span class="token punctuation">(</span>name,2,1<span class="token punctuation">))</span> FROM <span class="token string">&quot;my-sql-index&quot;</span>
<span class="token comment"># LAST / LAST_VALUE : LAST (第一个字段，排序字段)</span>
SELECT last<span class="token punctuation">(</span>name, release_date<span class="token punctuation">)</span> FROM <span class="token string">&quot;my-sql-index&quot;</span>
SELECT last_value<span class="token punctuation">(</span>substring<span class="token punctuation">(</span>name,2,1<span class="token punctuation">))</span> FROM <span class="token string">&quot;my-sql-index&quot;</span>
<span class="token comment"># KURTOSIS 量化字段的峰值分布</span>
SELECT KURTOSIS<span class="token punctuation">(</span>page_count<span class="token punctuation">)</span> FROM <span class="token string">&quot;my-sql-index&quot;</span>
<span class="token comment"># MAD</span>
SELECT MAD<span class="token punctuation">(</span>page_count<span class="token punctuation">)</span> FROM <span class="token string">&quot;my-sql-index&quot;</span>
</code></pre></div><p><strong>分组函数</strong></p> <div class="language-json extra-class"><pre class="language-json"><code># HISTOGRAM <span class="token operator">:</span> 直方矩阵
SELECT HISTOGRAM(page_count<span class="token punctuation">,</span> <span class="token number">100</span>) as c， count(*) FROM <span class="token string">&quot;my-sql-index&quot;</span> group by 
c
</code></pre></div><p><strong>数学通用函数</strong></p> <div class="language-json extra-class"><pre class="language-json"><code># ABS：求数字的绝对值
select ABS(page_count) from <span class="token string">&quot;myindex&quot;</span> limit <span class="token number">5</span>
# CBRT：求数字的立方根，返回 double
select page_count v<span class="token punctuation">,</span>CBRT(page_count) cbrt from <span class="token string">&quot;myindex&quot;</span> limit <span class="token number">5</span>
# CEIL：返回大于或者等于指定表达式最小整数（double）
select page_count v<span class="token punctuation">,</span>CEIL(page_count) from <span class="token string">&quot;myindex&quot;</span> limit <span class="token number">5</span>
# CEILING：等同于 CEIL
select page_count v<span class="token punctuation">,</span>CEILING(page_count) from <span class="token string">&quot;myindex&quot;</span> limit <span class="token number">5</span>
# E：返回自然常数 e(<span class="token number">2.718281828459045</span>)
select page_count<span class="token punctuation">,</span>E(page_count) from <span class="token string">&quot;myindex&quot;</span> limit <span class="token number">5</span>
# ROUND：四舍五入精确到个位
select ROUND(<span class="token number">-3.14</span>)
# FLOOR：向下取整
select FLOOR(<span class="token number">3.14</span>)
# LOG：计算以 <span class="token number">2</span> 为底的自然对数
select LOG(<span class="token number">4</span>)
# LOG10：计算以 <span class="token number">10</span> 为底的自然对数
select LOG10(<span class="token number">100</span>)
# SQRT：求一个非负实数的平方根
select SQRT(<span class="token number">9</span>)
# EXP：此函数返回 e(自然对数的底)的 X 次方的值
select EXP(<span class="token number">3</span>)
</code></pre></div><p><strong>三角函数</strong></p> <div class="language-json extra-class"><pre class="language-json"><code># DEGREES：返回 X 从弧度转换为度值
select DEGREES(x)
# RADIANS：返回 X 从度转换成弧度的值
select RADIANS(x)
# SIN：返回 X 的正弦
select SIN(x)
# COS：返回 X，X 值是以弧度给出的余弦值
select COS(角度)
# TAN：返回参数 X，表示以弧度的切线值
select TAN(角度)
# ASIN：返回 X 的反正弦，X 的值必须在<span class="token number">-1</span> 至 <span class="token number">1</span> 范围内，返回 NULL
select ASIN(x)
# ACOS：返回 X 的反正弦，X 值必须<span class="token number">-1</span> 到 <span class="token number">1</span> 之间范围否则将返回 NULL
select ACOS(x)
# ATAN：返回 X 的反正切
select ATAN(x)
# SINH：返回 X 的双曲正弦值
select SINH(x)
# COSH：返回 X 的双曲余弦值
select COSH(x)
</code></pre></div><p><strong>日期时间函数</strong></p> <div class="language-json extra-class"><pre class="language-json"><code># YEAR：
SELECT YEAR(CAST('<span class="token number">2022</span><span class="token number">-05</span>-01T00<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span>00Z' AS TIMESTAMP)) AS year
# MONTH_OF_YEAR() or MONTH()：
SELECT MONTH(CAST('<span class="token number">2022</span><span class="token number">-05</span>-01T00<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span>00Z' AS TIMESTAMP)) AS month
# WEEK_OF_YEAR() or WEEK()：
SELECT WEEK(CAST('<span class="token number">2022</span><span class="token number">-05</span>-01T00<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span>00Z' AS TIMESTAMP)) AS week
# DAY_OF_YEAR() or DOY() ，效果等同于 EXTRACT(&lt;datetime_function&gt; FROM 
&lt;expression&gt;)：
SELECT DOY(CAST('<span class="token number">2022</span><span class="token number">-05</span>-01T00<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span>00Z' AS TIMESTAMP)) AS day
# DAY_OF_MONTH()<span class="token punctuation">,</span> DOM()<span class="token punctuation">,</span> or DAY()：
SELECT DAY(CAST('<span class="token number">2022</span><span class="token number">-05</span>-01T00<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span>00Z' AS TIMESTAMP)) AS day
# DAY_OF_WEEK() or DOW()：
SELECT DOW(CAST('<span class="token number">2022</span><span class="token number">-05</span>-01T00<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span>00Z' AS TIMESTAMP)) AS day
# HOUR_OF_DAY() or HOUR()：
SELECT HOUR(CAST('<span class="token number">2022</span><span class="token number">-05</span>-01T00<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span>00Z' AS TIMESTAMP)) AS hour
# MINUTE_OF_DAY()：
SELECT MINUTE_OF_DAY(CAST('<span class="token number">2022</span><span class="token number">-05</span>-01T00<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span>00Z' AS TIMESTAMP)) AS minute
# MINUTE_OF_HOUR() or MINUTE()：
SELECT MINUTE(CAST('<span class="token number">2022</span><span class="token number">-05</span>-01T00<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span>00Z' AS TIMESTAMP)) AS minute
# SECOND_OF_MINUTE() or SECOND()：
SELECT SECOND(CAST('<span class="token number">2022</span><span class="token number">-05</span>-01T00<span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span>00Z' AS TIMESTAMP)) AS second
</code></pre></div><p><strong>全文检索函数</strong></p> <div class="language-json extra-class"><pre class="language-json"><code># MATCH：MATCH(匹配字段，规则<span class="token punctuation">,</span> 配置参数(可选))
SELECT * FROM <span class="token string">&quot;my-sql-index&quot;</span> where MATCH(name<span class="token punctuation">,</span> 'JAVA')
SELECT * FROM <span class="token string">&quot;my-sql-index&quot;</span> where MATCH(name<span class="token punctuation">,</span> 'java')
# MATCH：MATCH(('匹配字段^权重 <span class="token number">1</span><span class="token punctuation">,</span>匹配字段^权重 <span class="token number">2</span>'，规则<span class="token punctuation">,</span> 配置参数(可选))
SELECT * FROM <span class="token string">&quot;my-sql-index&quot;</span> where MATCH('author^<span class="token number">2</span><span class="token punctuation">,</span>name^<span class="token number">5</span>'<span class="token punctuation">,</span> 'java')
# QUERY
SELECT * FROM <span class="token string">&quot;my-sql-index&quot;</span> where QUERY('name<span class="token operator">:</span>Java')
# SCORE <span class="token operator">:</span> 评分
SELECT *<span class="token punctuation">,</span> score() FROM <span class="token string">&quot;my-sql-index&quot;</span> where QUERY('name<span class="token operator">:</span>Java')
</code></pre></div><p><strong>字符串检索函数</strong></p> <div class="language-json extra-class"><pre class="language-json"><code># ASCII <span class="token operator">:</span> 字符串转成 ASC 码
SELECT ASCII('Elastic')
# BIT_LENGTH ： 位长度
SELECT BIT_LENGTH('Elastic')
SELECT BIT_LENGTH('中国')
# CHAR ：转换字符
SELECT CHAR(<span class="token number">69</span>)
# CHAR_LENGTH ：字符长度
SELECT CHAR_LENGTH('Elastic')
# CONCAT<span class="token operator">:</span>合并
SELECT CONCAT('Elastic'<span class="token punctuation">,</span> 'search')
# INSERT <span class="token operator">:</span> INSERT(字符串，起始位置，长度，插入的内容)
SELECT INSERT('Elastic'<span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> 'search')
SELECT INSERT('Elastic'<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> 'search')
# LCASE ：转换小写
SELECT LCASE('Elastic')
# LEFT <span class="token operator">:</span> 获取左边最多 N 个字符
SELECT LEFT('Elastic'<span class="token punctuation">,</span><span class="token number">3</span>)
# LENGTH
SELECT length('Elastic')
SELECT length('中国')
# LOCATE <span class="token operator">:</span> LOCATE(表达式，字符串，起始位置)，获取满足条件的位置
SELECT LOCATE('a'<span class="token punctuation">,</span> 'Elasticsearch')
SELECT LOCATE('a'<span class="token punctuation">,</span> 'Elasticsearch'<span class="token punctuation">,</span> <span class="token number">5</span>)
# LTRIM ：去除左边的空格
SELECT LTRIM(' Elastic')
# OCTET_LENGTH <span class="token operator">:</span> 字节长度
SELECT OCTET_LENGTH('Elastic')
SELECT OCTET_LENGTH('中国')
# POSITION ：获取指定字符串的位置
SELECT POSITION('Elastic'<span class="token punctuation">,</span> 'Elasticsearch')
# REPEAT ：将字符串重复指定次数
SELECT REPEAT('Elastic'<span class="token punctuation">,</span> <span class="token number">3</span>)
# REPLACE ：替换数据
SELECT REPLACE('Elastic'<span class="token punctuation">,</span>'El'<span class="token punctuation">,</span>'Fant')
# RIGHT ：从右边获取指定数量的数据
SELECT RIGHT('Elastic'<span class="token punctuation">,</span><span class="token number">3</span>)
# RTRIM ：去除右边的空格
SELECT RTRIM('Elastic ')
# SPACE <span class="token operator">:</span> 生成指定数量的空格
SELECT concat(SPACE(<span class="token number">3</span>)<span class="token punctuation">,</span>'abc')
# STARTS_WITH <span class="token operator">:</span> 判断是否以指定字符串开头
SELECT STARTS_WITH('Elasticsearch'<span class="token punctuation">,</span> 'Elastic')
# SUBSTRING ： 截取字符串，必须传递三个参数
SELECT SUBSTRING('Elasticsearch'<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">7</span>)
# TRIM ：去掉首尾空格
SELECT TRIM(' Elastic ') AS trimmed
# UCASE <span class="token operator">:</span> 转换大写
SELECT UCASE('Elastic')
</code></pre></div><p><strong>条件分支函数</strong></p> <div class="language-json extra-class"><pre class="language-json"><code># 多重分支判断
SELECT CASE <span class="token number">5</span>
 WHEN <span class="token number">1</span> THEN 'elastic'
 WHEN <span class="token number">2</span> THEN 'search'
 WHEN <span class="token number">3</span> THEN 'elasticsearch'
 ELSE 'default'
 END AS <span class="token string">&quot;case&quot;</span>
SELECT CASE WHEN <span class="token number">1</span> &gt; <span class="token number">2</span> THEN 'elastic'
 WHEN <span class="token number">2</span> &gt; <span class="token number">10</span> THEN 'search'
 ELSE 'default'
 END AS <span class="token string">&quot;case&quot;</span>
# IFNULL
SELECT IFNULL('elastic'<span class="token punctuation">,</span> <span class="token null keyword">null</span>) AS <span class="token string">&quot;ifnull&quot;</span>
SELECT IFNULL(<span class="token null keyword">null</span><span class="token punctuation">,</span> 'search') AS <span class="token string">&quot;ifnull&quot;</span>
# IIF
SELECT IIF(<span class="token number">1</span> &lt; <span class="token number">2</span><span class="token punctuation">,</span> 'TRUE'<span class="token punctuation">,</span> 'FALSE') AS result1<span class="token punctuation">,</span> IIF(<span class="token number">1</span> &gt; <span class="token number">2</span><span class="token punctuation">,</span> 'TRUE'<span class="token punctuation">,</span> 'FALSE') AS 
result2
# ISNULL
SELECT ISNULL('elastic'<span class="token punctuation">,</span> <span class="token null keyword">null</span>) AS <span class="token string">&quot;isnull&quot;</span>
SELECT ISNULL(<span class="token null keyword">null</span><span class="token punctuation">,</span> 'search') AS <span class="token string">&quot;isnull&quot;</span>
# LEAST<span class="token operator">:</span>获取除 <span class="token null keyword">null</span> 外的最小值
SELECT LEAST(<span class="token null keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">11</span>) AS <span class="token string">&quot;least&quot;</span>
SELECT LEAST(<span class="token null keyword">null</span><span class="token punctuation">,</span> <span class="token null keyword">null</span><span class="token punctuation">,</span> <span class="token null keyword">null</span><span class="token punctuation">,</span> <span class="token null keyword">null</span>) AS <span class="token string">&quot;least&quot;</span>
# NULLIF <span class="token operator">:</span> 如果两个字符串不相同，则返回第一个字符串，如果相同，返回 <span class="token null keyword">null</span>
SELECT NULLIF('elastic'<span class="token punctuation">,</span> 'search') AS <span class="token string">&quot;nullif&quot;</span>
SELECT NULLIF('elastic'<span class="token punctuation">,</span> 'elastic') AS <span class="token string">&quot;nullif&quot;</span>
# NVL <span class="token operator">:</span> 返回第一个不是 <span class="token null keyword">null</span> 的字符串，如果都是 <span class="token null keyword">null</span><span class="token punctuation">,</span>那么返回 Null
SELECT NVL('elastic'<span class="token punctuation">,</span> <span class="token null keyword">null</span>) AS <span class="token string">&quot;nvl&quot;</span>
SELECT NVL(<span class="token null keyword">null</span><span class="token punctuation">,</span> <span class="token null keyword">null</span>) AS <span class="token string">&quot;nvl&quot;</span>
</code></pre></div><p><strong>系统函数</strong></p> <div class="language-json extra-class"><pre class="language-json"><code># ES 集群
SELECT DATABASE()
# 用户
SELECT USER()
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/数据库/ElasticSearch/ES进阶-EQL操作.html" class="prev">
        ES进阶-EQL操作
      </a></span> <span class="next"><a href="/数据库/ElasticSearch/ES进阶-SQL客户端DataGrip.html">
        ES进阶-SQL客户端DataGrip
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.540aeaec.js" defer></script><script src="/assets/js/2.c3162e30.js" defer></script><script src="/assets/js/44.d1bce4cc.js" defer></script>
  </body>
</html>
