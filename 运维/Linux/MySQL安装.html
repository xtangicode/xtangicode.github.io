<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1. 创建目录 | Sugar</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/logo.jpg">
    <meta name="description" content="Sugar">
    
    <link rel="preload" href="/assets/css/0.styles.e8e4f3a3.css" as="style"><link rel="preload" href="/assets/js/app.d7322905.js" as="script"><link rel="preload" href="/assets/js/2.c3162e30.js" as="script"><link rel="preload" href="/assets/js/69.77175893.js" as="script"><link rel="prefetch" href="/assets/js/10.67b9b5e3.js"><link rel="prefetch" href="/assets/js/11.eccbc9e5.js"><link rel="prefetch" href="/assets/js/12.90a999aa.js"><link rel="prefetch" href="/assets/js/13.f1d985c2.js"><link rel="prefetch" href="/assets/js/14.1d691475.js"><link rel="prefetch" href="/assets/js/15.8b0c9770.js"><link rel="prefetch" href="/assets/js/16.7161a0ac.js"><link rel="prefetch" href="/assets/js/17.583e5220.js"><link rel="prefetch" href="/assets/js/18.d622bcdc.js"><link rel="prefetch" href="/assets/js/19.b94f8bed.js"><link rel="prefetch" href="/assets/js/20.f2ea7a33.js"><link rel="prefetch" href="/assets/js/21.353c4514.js"><link rel="prefetch" href="/assets/js/22.5f92fa4d.js"><link rel="prefetch" href="/assets/js/23.5cf5bfeb.js"><link rel="prefetch" href="/assets/js/24.095db818.js"><link rel="prefetch" href="/assets/js/25.18fc79d4.js"><link rel="prefetch" href="/assets/js/26.9e45ce2e.js"><link rel="prefetch" href="/assets/js/27.53a9d58a.js"><link rel="prefetch" href="/assets/js/28.73269734.js"><link rel="prefetch" href="/assets/js/29.6374b509.js"><link rel="prefetch" href="/assets/js/3.b6c170f4.js"><link rel="prefetch" href="/assets/js/30.a553d4c7.js"><link rel="prefetch" href="/assets/js/31.dea786d9.js"><link rel="prefetch" href="/assets/js/32.6321160c.js"><link rel="prefetch" href="/assets/js/33.d45e62b4.js"><link rel="prefetch" href="/assets/js/34.2eb6f7f1.js"><link rel="prefetch" href="/assets/js/35.4107ba8c.js"><link rel="prefetch" href="/assets/js/36.8cba08f9.js"><link rel="prefetch" href="/assets/js/37.20e0212a.js"><link rel="prefetch" href="/assets/js/38.2d98b255.js"><link rel="prefetch" href="/assets/js/39.9eae5530.js"><link rel="prefetch" href="/assets/js/4.ff62c16d.js"><link rel="prefetch" href="/assets/js/40.b7df088d.js"><link rel="prefetch" href="/assets/js/41.06893ddd.js"><link rel="prefetch" href="/assets/js/42.42cf2c09.js"><link rel="prefetch" href="/assets/js/43.dbfcf8ef.js"><link rel="prefetch" href="/assets/js/44.8db8b5b1.js"><link rel="prefetch" href="/assets/js/45.a0fbf795.js"><link rel="prefetch" href="/assets/js/46.d2f40e6b.js"><link rel="prefetch" href="/assets/js/47.e2c2787f.js"><link rel="prefetch" href="/assets/js/48.f8c4a82f.js"><link rel="prefetch" href="/assets/js/49.d3174ab0.js"><link rel="prefetch" href="/assets/js/5.23e5bbd6.js"><link rel="prefetch" href="/assets/js/50.98304404.js"><link rel="prefetch" href="/assets/js/51.1bfaeeb7.js"><link rel="prefetch" href="/assets/js/52.cf9c08e6.js"><link rel="prefetch" href="/assets/js/53.98f68fc2.js"><link rel="prefetch" href="/assets/js/54.08e32a5c.js"><link rel="prefetch" href="/assets/js/55.a3dcf50c.js"><link rel="prefetch" href="/assets/js/56.494912c8.js"><link rel="prefetch" href="/assets/js/57.75cea876.js"><link rel="prefetch" href="/assets/js/58.ed47c823.js"><link rel="prefetch" href="/assets/js/59.ca37a8f1.js"><link rel="prefetch" href="/assets/js/6.c13b59a2.js"><link rel="prefetch" href="/assets/js/60.a3bef4eb.js"><link rel="prefetch" href="/assets/js/61.d2486073.js"><link rel="prefetch" href="/assets/js/62.9372d44e.js"><link rel="prefetch" href="/assets/js/63.2cb33315.js"><link rel="prefetch" href="/assets/js/64.6b3e676e.js"><link rel="prefetch" href="/assets/js/65.81d0efc9.js"><link rel="prefetch" href="/assets/js/66.36c5fce3.js"><link rel="prefetch" href="/assets/js/67.8fd7d703.js"><link rel="prefetch" href="/assets/js/68.23743e63.js"><link rel="prefetch" href="/assets/js/7.9358edd5.js"><link rel="prefetch" href="/assets/js/70.beda563a.js"><link rel="prefetch" href="/assets/js/71.cb3bc33b.js"><link rel="prefetch" href="/assets/js/72.079ccfec.js"><link rel="prefetch" href="/assets/js/73.c6f4e9e2.js"><link rel="prefetch" href="/assets/js/8.99327eb9.js"><link rel="prefetch" href="/assets/js/9.dac5d9ea.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e8e4f3a3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Sugar</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Java/" class="nav-link">
  Java
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  VUE
</a></li><li class="dropdown-item"><!----> <a href="/数据库/ElasticSearch/ES知识体系.html" class="nav-link">
  Flutter
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          SQL数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/数据库/MySQL/MySQL目录结构.html" class="nav-link">
  MySQL
</a></li></ul></li><li class="dropdown-item"><h4>
          NoSQL数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  Redis
</a></li><li class="dropdown-subitem"><a href="/数据库/ElasticSearch/ES知识体系.html" class="nav-link">
  ElasticSearch
</a></li><li class="dropdown-subitem"><a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  MangoDB
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          后端框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  MyBatis
</a></li><li class="dropdown-subitem"><a href="/框架/Spring/SpEL&amp;EL表达式.html" class="nav-link">
  Spring
</a></li><li class="dropdown-subitem"><a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  SpringBoot
</a></li><li class="dropdown-subitem"><a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  SpringCloud
</a></li><li class="dropdown-subitem"><a href="/框架/Activiti/Activiti介绍.html" class="nav-link">
  Activiti
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><span class="title">中间件</span> <span class="arrow down"></span></button> <button type="button" aria-label="中间件" class="mobile-dropdown-title"><span class="title">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          服务器
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/中间件/Nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-subitem"><a href="/中间件/Tomcat/" class="nav-link">
  Tomcat
</a></li><li class="dropdown-subitem"><a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  Netty
</a></li><li class="dropdown-subitem"><a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  Nacos
</a></li><li class="dropdown-subitem"><a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  OSS
</a></li></ul></li><li class="dropdown-item"><h4>
          消息队列
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  RabbitMQ
</a></li><li class="dropdown-subitem"><a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  Kafka
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  架构
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><span class="title">运维</span> <span class="arrow down"></span></button> <button type="button" aria-label="运维" class="mobile-dropdown-title"><span class="title">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/运维/Linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  K8S
</a></li><li class="dropdown-item"><!----> <a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  CI/CD
</a></li><li class="dropdown-item"><!----> <a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  DevOps
</a></li><li class="dropdown-item"><!----> <a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  监控
</a></li><li class="dropdown-item"><!----> <a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  日志收集
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Java/" class="nav-link">
  Java
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  VUE
</a></li><li class="dropdown-item"><!----> <a href="/数据库/ElasticSearch/ES知识体系.html" class="nav-link">
  Flutter
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          SQL数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/数据库/MySQL/MySQL目录结构.html" class="nav-link">
  MySQL
</a></li></ul></li><li class="dropdown-item"><h4>
          NoSQL数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  Redis
</a></li><li class="dropdown-subitem"><a href="/数据库/ElasticSearch/ES知识体系.html" class="nav-link">
  ElasticSearch
</a></li><li class="dropdown-subitem"><a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  MangoDB
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          后端框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  MyBatis
</a></li><li class="dropdown-subitem"><a href="/框架/Spring/SpEL&amp;EL表达式.html" class="nav-link">
  Spring
</a></li><li class="dropdown-subitem"><a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  SpringBoot
</a></li><li class="dropdown-subitem"><a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  SpringCloud
</a></li><li class="dropdown-subitem"><a href="/框架/Activiti/Activiti介绍.html" class="nav-link">
  Activiti
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><span class="title">中间件</span> <span class="arrow down"></span></button> <button type="button" aria-label="中间件" class="mobile-dropdown-title"><span class="title">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          服务器
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/中间件/Nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-subitem"><a href="/中间件/Tomcat/" class="nav-link">
  Tomcat
</a></li><li class="dropdown-subitem"><a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  Netty
</a></li><li class="dropdown-subitem"><a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  Nacos
</a></li><li class="dropdown-subitem"><a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  OSS
</a></li></ul></li><li class="dropdown-item"><h4>
          消息队列
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  RabbitMQ
</a></li><li class="dropdown-subitem"><a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  Kafka
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  架构
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><span class="title">运维</span> <span class="arrow down"></span></button> <button type="button" aria-label="运维" class="mobile-dropdown-title"><span class="title">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/运维/Linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  K8S
</a></li><li class="dropdown-item"><!----> <a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  CI/CD
</a></li><li class="dropdown-item"><!----> <a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  DevOps
</a></li><li class="dropdown-item"><!----> <a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  监控
</a></li><li class="dropdown-item"><!----> <a href="/%E8%BF%90%E7%BB%B4/Linux/.html" class="nav-link">
  日志收集
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>编程环境和软件工具安装</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/运维/Linux/MySQL安装.html" class="active sidebar-link">MySQL安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/运维/Linux/MySQL安装.html#_1-创建目录" class="sidebar-link">1. 创建目录</a></li><li class="sidebar-sub-header"><a href="/运维/Linux/MySQL安装.html#_2-下载mysql" class="sidebar-link">2. 下载mysql</a></li><li class="sidebar-sub-header"><a href="/运维/Linux/MySQL安装.html#_3-解压-赋予执行权限" class="sidebar-link">3. 解压，赋予执行权限</a></li><li class="sidebar-sub-header"><a href="/运维/Linux/MySQL安装.html#_4-生成密码" class="sidebar-link">4. 生成密码</a></li><li class="sidebar-sub-header"><a href="/运维/Linux/MySQL安装.html#_5-创建系统服务" class="sidebar-link">5. 创建系统服务</a></li><li class="sidebar-sub-header"><a href="/运维/Linux/MySQL安装.html#_6-连接数据库测试" class="sidebar-link">6. 连接数据库测试</a></li><li class="sidebar-sub-header"><a href="/运维/Linux/MySQL安装.html#_7-修改密码" class="sidebar-link">7. 修改密码</a></li><li class="sidebar-sub-header"><a href="/运维/Linux/MySQL安装.html#_8-设置服务自启动" class="sidebar-link">8. 设置服务自启动</a></li></ul></li><li><a href="/运维/Linux/MySQL常用命令.html" class="sidebar-link">MySQL常用命令</a></li><li><a href="/运维/Linux/Linux常用命令.html" class="sidebar-link">Linux常用命令</a></li><li><a href="/运维/Linux/Redis安装.html" class="sidebar-link">Redis安装</a></li><li><a href="/运维/Linux/Nginx安装.html" class="sidebar-link">Nginx安装</a></li><li><a href="/运维/Linux/FFmpeg安装.html" class="sidebar-link">FFmpeg安装</a></li><li><a href="/运维/Linux/MinIO安装.html" class="sidebar-link">MinIO安装</a></li><li><a href="/运维/Linux/ElasticSearch和Kibana安装.html" class="sidebar-link">ElasticSearch和Kibana安装</a></li><li><a href="/运维/Linux/内网穿透.html" class="sidebar-link">内网穿透</a></li><li><a href="/运维/Linux/vm虚拟机linux网络穿透.html" class="sidebar-link">vm虚拟机linux网络穿透</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Linux常用命令</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/运维/Linux/Linux常用命令.html" class="sidebar-link">操作命令</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="_1-创建目录"><a href="#_1-创建目录" class="header-anchor">#</a> 1. 创建目录</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">mkdir</span> /data/mysql/
</code></pre></div><h2 id="_2-下载mysql"><a href="#_2-下载mysql" class="header-anchor">#</a> 2. 下载mysql</h2> <p>官网下载mysql或者使用命令下载</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">wget</span> https://cdn.mysql.com/archives/mysql-5.7/mysql-5.7.35-linux-glibc2.12-x86_64.tar.gz 
</code></pre></div><h2 id="_3-解压-赋予执行权限"><a href="#_3-解压-赋予执行权限" class="header-anchor">#</a> 3. 解压，赋予执行权限</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#进行解压</span>
<span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> mysql-5.7.35-linux-glibc2.12-x86_64.tar.gz 
<span class="token comment">#重命名</span>
<span class="token function">mv</span> mysql-5.7.35-linux-glibc2.12-x86_64 mysql13307 
<span class="token builtin class-name">cd</span> mysql13307
<span class="token function">mkdir</span> mysql-files run log
<span class="token function">touch</span> log/mysqld.log
<span class="token comment">#创建data目录</span>
<span class="token function">mkdir</span> data 
<span class="token function">chown</span> <span class="token parameter variable">-R</span> mysql:mysql /data/mysql/mysql13307 /data/mysql/mysql13307/data
<span class="token function">chmod</span> <span class="token number">750</span> mysql-files
<span class="token comment">#创建mysql配置文件</span>
<span class="token function">vi</span> my.cnf 在/data/mysql/mysql13307 
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>client<span class="token punctuation">]</span>
port <span class="token operator">=</span> <span class="token number">13307</span>
default-character-set<span class="token operator">=</span>utf8

<span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>
default-storage-engine<span class="token operator">=</span>innodb
<span class="token assign-left variable">innodb_file_per_table</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">innodb_flush_log_at_trx_commit</span><span class="token operator">=</span><span class="token number">1</span>                               
<span class="token assign-left variable">max_allowed_packet</span><span class="token operator">=</span>16M
<span class="token comment"># 设置默认字符集，5.7默认是latin，8.0默认是utf8mba</span>
<span class="token assign-left variable">character_set_server</span><span class="token operator">=</span>utf8
port <span class="token operator">=</span> <span class="token number">13307</span>
<span class="token assign-left variable">max_connections</span><span class="token operator">=</span><span class="token number">2000</span>

<span class="token assign-left variable">init_connect</span><span class="token operator">=</span><span class="token string">'SET NAMES utf8'</span>

<span class="token assign-left variable">basedir</span><span class="token operator">=</span>/data/mysql/mysql13307
<span class="token assign-left variable">datadir</span><span class="token operator">=</span>/data/mysql/mysql13307/data
<span class="token assign-left variable">socket</span><span class="token operator">=</span>/data/mysql/mysql13307/mysql.sock
log-error<span class="token operator">=</span>/data/mysql/mysql13307/log/mysqld.log
pid-file<span class="token operator">=</span>/data/mysql/mysql13307/run/mysqld.pid

<span class="token comment">#bin log</span>
<span class="token assign-left variable">server_id</span><span class="token operator">=</span><span class="token number">101</span>
log-bin<span class="token operator">=</span>/data/mysql/mysql13307/log/product-bin

slave-skip-errors<span class="token operator">=</span>all
skip-slave-start<span class="token operator">=</span><span class="token number">1</span>

<span class="token assign-left variable">relay_log</span><span class="token operator">=</span>mysql-relay-bin
<span class="token assign-left variable">expire_logs_days</span><span class="token operator">=</span><span class="token number">10</span>

<span class="token comment">#slow query log</span>
<span class="token assign-left variable">slow_query_log</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">slow_query_log_file</span><span class="token operator">=</span>/data/mysql/mysql13307/log/slow_query.log

lower_case_table_names <span class="token operator">=</span> <span class="token number">1</span>

<span class="token punctuation">[</span>mysqld_safe<span class="token punctuation">]</span>
lower_case_table_names <span class="token operator">=</span> <span class="token number">1</span>

log-error<span class="token operator">=</span>/data/mysql/mysql13307/log/mysqld.log
pid-file<span class="token operator">=</span>/data/mysql/mysql13307/run/mysqld.pid
</code></pre></div><h2 id="_4-生成密码"><a href="#_4-生成密码" class="header-anchor">#</a> 4. 生成密码</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#初始化生成密码</span>
bin/mysqld --defaults-file<span class="token operator">=</span>/data/mysql/mysql13307/my.cnf <span class="token parameter variable">--initialize</span> <span class="token parameter variable">--user</span><span class="token operator">=</span>mysql <span class="token parameter variable">--basedir</span><span class="token operator">=</span>/data/mysql/mysql13307 <span class="token parameter variable">--datadir</span><span class="token operator">=</span>/data/mysql/mysql13307/data <span class="token parameter variable">--console</span> --lower-case-table-names<span class="token operator">=</span><span class="token number">1</span> 
 <span class="token comment">#查询密码</span>
<span class="token function">grep</span> <span class="token string">&quot;password&quot;</span> log/mysqld.log
<span class="token number">2022</span>-11-28T13:34:19.764435Z <span class="token number">1</span> <span class="token punctuation">[</span>Note<span class="token punctuation">]</span> A temporary password is generated <span class="token keyword">for</span> root@localhost: 0jvP36p7rw_<span class="token operator">&gt;</span>
</code></pre></div><h2 id="_5-创建系统服务"><a href="#_5-创建系统服务" class="header-anchor">#</a> 5. 创建系统服务</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">vi</span>  /etc/systemd/system/mysqld13307.service
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>
<span class="token assign-left variable">Description</span><span class="token operator">=</span>MySQL Server
<span class="token assign-left variable">Documentation</span><span class="token operator">=</span>man:mysqld<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>
<span class="token assign-left variable">Documentation</span><span class="token operator">=</span>http://dev.mysql.com/doc/refman/en/using-systemd.html
<span class="token assign-left variable">After</span><span class="token operator">=</span>network.target
<span class="token assign-left variable">After</span><span class="token operator">=</span>syslog.target

<span class="token punctuation">[</span>Install<span class="token punctuation">]</span>
<span class="token assign-left variable">WantedBy</span><span class="token operator">=</span>multi-user.target

<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>
<span class="token assign-left variable">User</span><span class="token operator">=</span>mysql
<span class="token assign-left variable">Group</span><span class="token operator">=</span>mysql
<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/data/mysql/mysql13307/bin/mysqld --defaults-file<span class="token operator">=</span>/data/mysql/mysql13307/my.cnf
LimitNOFILE <span class="token operator">=</span> <span class="token number">5000</span>
</code></pre></div><h2 id="_6-连接数据库测试"><a href="#_6-连接数据库测试" class="header-anchor">#</a> 6. 连接数据库测试</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@tangxinNo1 mysql13307<span class="token punctuation">]</span><span class="token comment">#systemctl start mysqld13307.service </span>
<span class="token punctuation">[</span>root@tangxinNo1 mysql13307<span class="token punctuation">]</span><span class="token comment"># systemctl status mysqld13307.service</span>
● mysqld13307.service - MySQL Server
Loaded: loaded <span class="token punctuation">(</span>/etc/systemd/system/mysqld13307.service<span class="token punctuation">;</span> disabled<span class="token punctuation">;</span> vendor preset: disabled<span class="token punctuation">)</span>
Active: active <span class="token punctuation">(</span>running<span class="token punctuation">)</span> since 一 <span class="token number">2022</span>-11-28 <span class="token number">21</span>:37:59 CST<span class="token punctuation">;</span> 8s ago
Docs: man:mysqld<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>
http://dev.mysql.com/doc/refman/en/using-systemd.html
Main PID: <span class="token number">15773</span> <span class="token punctuation">(</span>mysqld<span class="token punctuation">)</span>
Tasks: <span class="token number">27</span>
CGroup: /system.slice/mysqld13307.service
└─15773 /data/mysql/mysql13307/bin/mysqld --defaults-file<span class="token operator">=</span>/data/mysql/mysql13307/my.cnf

<span class="token number">11</span>月 <span class="token number">28</span> <span class="token number">21</span>:37:59 tangxinNo1 systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Started MySQL Server.

</code></pre></div><p>连接mysql， <code>mysql -uroot -S /data/mysql/mysql13307/mysql.sock -p</code>，这一步可能找不到mysql.sock，确认一下mysql.sock位置是否正确，再重启一下mysql服务，再次执行。不指定-S默认路径是/tmp/mysql.sock。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@tangxinNo1 mysql13307<span class="token punctuation">]</span><span class="token comment"># bin/mysql -uroot -S /data/mysql/mysql13307/mysql.sock -p</span>
Enter password:
Welcome to the MySQL monitor.  Commands end with <span class="token punctuation">;</span> or <span class="token punctuation">\</span>g.
Your MySQL connection <span class="token function">id</span> is <span class="token number">2</span>
Server version: <span class="token number">5.7</span>.35-log

Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token number">2000</span>, <span class="token number">2021</span>, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type <span class="token string">'help;'</span> or <span class="token string">'\h'</span> <span class="token keyword">for</span> help. Type <span class="token string">'\c'</span> to <span class="token function">clear</span> the current input statement.
</code></pre></div><h2 id="_7-修改密码"><a href="#_7-修改密码" class="header-anchor">#</a> 7. 修改密码</h2> <div class="language-shell extra-class"><pre class="language-shell"><code>
Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token number">2000</span>, <span class="token number">2021</span>, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type <span class="token string">'help;'</span> or <span class="token string">'\h'</span> <span class="token keyword">for</span> help. Type <span class="token string">'\c'</span> to <span class="token function">clear</span> the current input statement.

mysql<span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> password <span class="token keyword">for</span> <span class="token string">'root'</span>@<span class="token string">'localhost'</span><span class="token operator">=</span>password<span class="token punctuation">(</span><span class="token string">'Tx123@!#'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK, <span class="token number">0</span> rows affected, <span class="token number">1</span> warning <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> flush privileges<span class="token punctuation">;</span>
Query OK, <span class="token number">0</span> rows affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span>
</code></pre></div><h2 id="_8-设置服务自启动"><a href="#_8-设置服务自启动" class="header-anchor">#</a> 8. 设置服务自启动</h2> <p>如果想设置开机自启动需要先修改<code>support-files/mysql.server</code>中配置，将相关mysql路径替换，复制到<code>/etc/init.d/</code>下，</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">basedir</span><span class="token operator">=</span>/data/mysql/mysql13307
<span class="token assign-left variable">datadir</span><span class="token operator">=</span>/data/mysql/mysql13307/data
其他/usr/local/mysql 全局替换为/data/mysql/mysql13307
</code></pre></div><p>具体如下</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/sh</span>
<span class="token comment"># Copyright Abandoned 1996 TCX DataKonsult AB &amp; Monty Program KB &amp; Detron HB</span>
<span class="token comment"># This file is public domain and comes with NO WARRANTY of any kind</span>

<span class="token comment"># MySQL daemon start/stop script.</span>

<span class="token comment"># Usually this is put in /etc/init.d (at least on machines SYSV R4 based</span>
<span class="token comment"># systems) and linked to /etc/rc3.d/S99mysql and /etc/rc0.d/K01mysql.</span>
<span class="token comment"># When this is done the mysql server will be started when the machine is</span>
<span class="token comment"># started and shut down when the systems goes down.</span>

<span class="token comment"># Comments to support chkconfig on RedHat Linux</span>
<span class="token comment"># chkconfig: 2345 64 36</span>
<span class="token comment"># description: A very fast and reliable SQL database engine.</span>

<span class="token comment"># Comments to support LSB init script conventions</span>
<span class="token comment">### BEGIN INIT INFO</span>
<span class="token comment"># Provides: mysql</span>
<span class="token comment"># Required-Start: $local_fs $network $remote_fs</span>
<span class="token comment"># Should-Start: ypbind nscd ldap ntpd xntpd</span>
<span class="token comment"># Required-Stop: $local_fs $network $remote_fs</span>
<span class="token comment"># Default-Start:  2 3 4 5</span>
<span class="token comment"># Default-Stop: 0 1 6</span>
<span class="token comment"># Short-Description: start and stop MySQL</span>
<span class="token comment"># Description: MySQL is a very fast and reliable SQL database engine.</span>
<span class="token comment">### END INIT INFO</span>

<span class="token comment"># If you install MySQL on some other places than /data/mysql/mysql13307, then you</span>
<span class="token comment"># have to do one of the following things for this script to work:</span>
<span class="token comment">#</span>
<span class="token comment"># - Run this script from within the MySQL installation directory</span>
<span class="token comment"># - Create a /etc/my.cnf file with the following information:</span>
<span class="token comment">#   [mysqld]</span>
<span class="token comment">#   basedir=&lt;path-to-mysql-installation-directory&gt;</span>
<span class="token comment"># - Add the above to any other configuration file (for example ~/.my.ini)</span>
<span class="token comment">#   and copy my_print_defaults to /usr/bin</span>
<span class="token comment"># - Add the path to the mysql-installation-directory to the basedir variable</span>
<span class="token comment">#   below.</span>
<span class="token comment">#</span>
<span class="token comment"># If you want to affect other MySQL variables, you should make your changes</span>
<span class="token comment"># in the /etc/my.cnf, ~/.my.cnf or other MySQL configuration files.</span>

<span class="token comment"># If you change base dir, you must also change datadir. These may get</span>
<span class="token comment"># overwritten by settings in the MySQL configuration files.</span>

<span class="token assign-left variable">basedir</span><span class="token operator">=</span>/data/mysql/mysql13307
<span class="token assign-left variable">datadir</span><span class="token operator">=</span>/data/mysql/mysql13307/data

<span class="token comment"># Default value, in seconds, afterwhich the script should timeout waiting</span>
<span class="token comment"># for server start. </span>
<span class="token comment"># Value here is overriden by value in my.cnf. </span>
<span class="token comment"># 0 means don't wait at all</span>
<span class="token comment"># Negative numbers mean to wait indefinitely</span>
<span class="token assign-left variable">service_startup_timeout</span><span class="token operator">=</span><span class="token number">900</span>

<span class="token comment"># Lock directory for RedHat / SuSE.</span>
<span class="token assign-left variable">lockdir</span><span class="token operator">=</span><span class="token string">'/var/lock/subsys'</span>
<span class="token assign-left variable">lock_file_path</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$lockdir</span>/mysql&quot;</span>

<span class="token comment"># The following variables are only set for letting mysql.server find things.</span>

<span class="token comment"># Set some defaults</span>
<span class="token assign-left variable">mysqld_pid_file_path</span><span class="token operator">=</span>
<span class="token keyword">if</span> <span class="token builtin class-name">test</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$basedir</span>&quot;</span>
<span class="token keyword">then</span>
<span class="token assign-left variable">basedir</span><span class="token operator">=</span>/data/mysql/mysql13307
<span class="token assign-left variable">bindir</span><span class="token operator">=</span>/data/mysql/mysql13307/bin
<span class="token keyword">if</span> <span class="token builtin class-name">test</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$datadir</span>&quot;</span>
<span class="token keyword">then</span>
<span class="token assign-left variable">datadir</span><span class="token operator">=</span>/data/mysql/mysql13307/data
<span class="token keyword">fi</span>
<span class="token assign-left variable">sbindir</span><span class="token operator">=</span>/data/mysql/mysql13307/bin
<span class="token assign-left variable">libexecdir</span><span class="token operator">=</span>/data/mysql/mysql13307/bin
<span class="token keyword">else</span>
<span class="token assign-left variable">bindir</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$basedir</span>/bin&quot;</span>
<span class="token keyword">if</span> <span class="token builtin class-name">test</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$datadir</span>&quot;</span>
<span class="token keyword">then</span>
<span class="token assign-left variable">datadir</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$basedir</span>/data&quot;</span>
<span class="token keyword">fi</span>
<span class="token assign-left variable">sbindir</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$basedir</span>/sbin&quot;</span>
<span class="token assign-left variable">libexecdir</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$basedir</span>/libexec&quot;</span>
<span class="token keyword">fi</span>

<span class="token comment"># datadir_set is used to determine if datadir was set (and so should be</span>
<span class="token comment"># *not* set inside of the --basedir= handler.)</span>
<span class="token assign-left variable">datadir_set</span><span class="token operator">=</span>

<span class="token comment">#</span>
<span class="token comment"># Use LSB init script functions for printing messages, if possible</span>
<span class="token comment">#</span>
<span class="token assign-left variable">lsb_functions</span><span class="token operator">=</span><span class="token string">&quot;/lib/lsb/init-functions&quot;</span>
<span class="token keyword">if</span> <span class="token builtin class-name">test</span> <span class="token parameter variable">-f</span> <span class="token variable">$lsb_functions</span> <span class="token punctuation">;</span> <span class="token keyword">then</span>
<span class="token builtin class-name">.</span> <span class="token variable">$lsb_functions</span>
<span class="token keyword">else</span>
<span class="token function-name function">log_success_msg</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot; SUCCESS! <span class="token variable">$@</span>&quot;</span>
<span class="token punctuation">}</span>
<span class="token function-name function">log_failure_msg</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot; ERROR! <span class="token variable">$@</span>&quot;</span>
<span class="token punctuation">}</span>
<span class="token keyword">fi</span>

<span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token string">&quot;/sbin:/usr/sbin:/bin:/usr/bin:<span class="token variable">$basedir</span>/bin&quot;</span>
<span class="token builtin class-name">export</span> <span class="token environment constant">PATH</span>

<span class="token assign-left variable">mode</span><span class="token operator">=</span><span class="token variable">$1</span>    <span class="token comment"># start or stop</span>

<span class="token punctuation">[</span> <span class="token variable">$#</span> <span class="token parameter variable">-ge</span> <span class="token number">1</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">shift</span>


<span class="token assign-left variable">other_args</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$*</span>&quot;</span>   <span class="token comment"># uncommon, but needed when called from an RPM upgrade action</span>
<span class="token comment"># Expected: &quot;--skip-networking --skip-grant-tables&quot;</span>
<span class="token comment"># They are not checked here, intentionally, as it is the resposibility</span>
<span class="token comment"># of the &quot;spec&quot; file author to give correct arguments only.</span>

<span class="token keyword">case</span> <span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;testing<span class="token entity" title="\c">\c</span>&quot;</span><span class="token variable">`</span></span>,<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">echo</span> <span class="token parameter variable">-n</span> testing<span class="token variable">`</span></span> <span class="token keyword">in</span>
*c*,-n*<span class="token punctuation">)</span> <span class="token assign-left variable">echo_n</span><span class="token operator">=</span>   <span class="token assign-left variable">echo_c</span><span class="token operator">=</span>     <span class="token punctuation">;</span><span class="token punctuation">;</span>
*c*,*<span class="token punctuation">)</span>   <span class="token assign-left variable">echo_n</span><span class="token operator">=</span>-n <span class="token assign-left variable">echo_c</span><span class="token operator">=</span>     <span class="token punctuation">;</span><span class="token punctuation">;</span>
*<span class="token punctuation">)</span>       <span class="token assign-left variable">echo_n</span><span class="token operator">=</span>   <span class="token assign-left variable">echo_c</span><span class="token operator">=</span><span class="token string">'\c'</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>

<span class="token function-name function">parse_server_arguments</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">for</span> arg <span class="token keyword">do</span>
<span class="token keyword">case</span> <span class="token string">&quot;<span class="token variable">$arg</span>&quot;</span> <span class="token keyword">in</span>
<span class="token parameter variable">--basedir</span><span class="token operator">=</span>*<span class="token punctuation">)</span>  <span class="token assign-left variable">basedir</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$arg</span>&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-e</span> <span class="token string">'s/^[^=]*=//'</span><span class="token variable">`</span></span>
<span class="token assign-left variable">bindir</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$basedir</span>/bin&quot;</span>
<span class="token keyword">if</span> <span class="token builtin class-name">test</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$datadir_set</span>&quot;</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
<span class="token assign-left variable">datadir</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$basedir</span>/data&quot;</span>
<span class="token keyword">fi</span>
<span class="token assign-left variable">sbindir</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$basedir</span>/sbin&quot;</span>
<span class="token assign-left variable">libexecdir</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$basedir</span>/libexec&quot;</span>
<span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token parameter variable">--datadir</span><span class="token operator">=</span>*<span class="token punctuation">)</span>  <span class="token assign-left variable">datadir</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$arg</span>&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-e</span> <span class="token string">'s/^[^=]*=//'</span><span class="token variable">`</span></span>
<span class="token assign-left variable">datadir_set</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token punctuation">;</span><span class="token punctuation">;</span>
--pid-file<span class="token operator">=</span>*<span class="token punctuation">)</span> <span class="token assign-left variable">mysqld_pid_file_path</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$arg</span>&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-e</span> <span class="token string">'s/^[^=]*=//'</span><span class="token variable">`</span></span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
--service-startup-timeout<span class="token operator">=</span>*<span class="token punctuation">)</span> <span class="token assign-left variable">service_startup_timeout</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$arg</span>&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-e</span> <span class="token string">'s/^[^=]*=//'</span><span class="token variable">`</span></span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
<span class="token keyword">done</span>
<span class="token punctuation">}</span>

<span class="token function-name function">wait_for_pid</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token assign-left variable">verb</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$1</span>&quot;</span>           <span class="token comment"># created | removed</span>
<span class="token assign-left variable">pid</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$2</span>&quot;</span>            <span class="token comment"># process ID of the program operating on the pid-file</span>
<span class="token assign-left variable">pid_file_path</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$3</span>&quot;</span> <span class="token comment"># path to the PID file.</span>

<span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">avoid_race_condition</span><span class="token operator">=</span><span class="token string">&quot;by checking again&quot;</span>

<span class="token keyword">while</span> <span class="token builtin class-name">test</span> <span class="token variable">$i</span> <span class="token parameter variable">-ne</span> <span class="token variable">$service_startup_timeout</span> <span class="token punctuation">;</span> <span class="token keyword">do</span>

<span class="token keyword">case</span> <span class="token string">&quot;<span class="token variable">$verb</span>&quot;</span> <span class="token keyword">in</span>
<span class="token string">'created'</span><span class="token punctuation">)</span>
<span class="token comment"># wait for a PID-file to pop into existence.</span>
<span class="token builtin class-name">test</span> <span class="token parameter variable">-s</span> <span class="token string">&quot;<span class="token variable">$pid_file_path</span>&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token string">''</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">break</span>
<span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token string">'removed'</span><span class="token punctuation">)</span>
<span class="token comment"># wait for this PID-file to disappear</span>
<span class="token builtin class-name">test</span> <span class="token operator">!</span> <span class="token parameter variable">-s</span> <span class="token string">&quot;<span class="token variable">$pid_file_path</span>&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token string">''</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">break</span>
<span class="token punctuation">;</span><span class="token punctuation">;</span>
*<span class="token punctuation">)</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;wait_for_pid () usage: wait_for_pid created|removed pid pid_file_path&quot;</span>
<span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>

<span class="token comment"># if server isn't running, then pid-file will never be updated</span>
<span class="token keyword">if</span> <span class="token builtin class-name">test</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;<span class="token variable">$pid</span>&quot;</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
<span class="token keyword">if</span> <span class="token function">kill</span> <span class="token parameter variable">-0</span> <span class="token string">&quot;<span class="token variable">$pid</span>&quot;</span> <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>/dev/null<span class="token punctuation">;</span> <span class="token keyword">then</span>
<span class="token builtin class-name">:</span>  <span class="token comment"># the server still runs</span>
<span class="token keyword">else</span>
<span class="token comment"># The server may have exited between the last pid-file check and now.  </span>
<span class="token keyword">if</span> <span class="token builtin class-name">test</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;<span class="token variable">$avoid_race_condition</span>&quot;</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
<span class="token assign-left variable">avoid_race_condition</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span>
<span class="token builtin class-name">continue</span>  <span class="token comment"># Check again.</span>
<span class="token keyword">fi</span>

<span class="token comment"># there's nothing that will affect the file.</span>
log_failure_msg <span class="token string">&quot;The server quit without updating PID file (<span class="token variable">$pid_file_path</span>).&quot;</span>
<span class="token builtin class-name">return</span> <span class="token number">1</span>  <span class="token comment"># not waiting any more.</span>
<span class="token keyword">fi</span>
<span class="token keyword">fi</span>

<span class="token builtin class-name">echo</span> <span class="token variable">$echo_n</span> <span class="token string">&quot;.<span class="token variable">$echo_c</span>&quot;</span>
<span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $i + <span class="token number">1</span><span class="token variable">`</span></span>
<span class="token function">sleep</span> <span class="token number">1</span>

<span class="token keyword">done</span>

<span class="token keyword">if</span> <span class="token builtin class-name">test</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$i</span>&quot;</span> <span class="token punctuation">;</span> <span class="token keyword">then</span>
log_success_msg
<span class="token builtin class-name">return</span> <span class="token number">0</span>
<span class="token keyword">else</span>
log_failure_msg
<span class="token builtin class-name">return</span> <span class="token number">1</span>
<span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token comment"># Get arguments from the my.cnf file,</span>
<span class="token comment"># the only group, which is read from now on is [mysqld]</span>
<span class="token keyword">if</span> <span class="token builtin class-name">test</span> <span class="token parameter variable">-x</span> <span class="token string">&quot;<span class="token variable">$bindir</span>/my_print_defaults&quot;</span><span class="token punctuation">;</span>  <span class="token keyword">then</span>
<span class="token assign-left variable">print_defaults</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$bindir</span>/my_print_defaults&quot;</span>
<span class="token keyword">else</span>
<span class="token comment"># Try to find basedir in /etc/my.cnf</span>
<span class="token assign-left variable">conf</span><span class="token operator">=</span>/etc/my.cnf
<span class="token assign-left variable">print_defaults</span><span class="token operator">=</span>
<span class="token keyword">if</span> <span class="token builtin class-name">test</span> <span class="token parameter variable">-r</span> <span class="token variable">$conf</span>
<span class="token keyword">then</span>
<span class="token assign-left variable">subpat</span><span class="token operator">=</span><span class="token string">'^[^=]*basedir[^=]*=\(.*\)$'</span>
<span class="token assign-left variable">dirs</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">sed</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;/<span class="token variable">$subpat</span>/!d&quot;</span> <span class="token parameter variable">-e</span> <span class="token string">'s//\1/'</span> $conf<span class="token variable">`</span></span>
<span class="token keyword">for</span> <span class="token for-or-select variable">d</span> <span class="token keyword">in</span> <span class="token variable">$dirs</span>
<span class="token keyword">do</span>
<span class="token assign-left variable">d</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">echo</span> $d <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-e</span> <span class="token string">'s/[ 	]//g'</span><span class="token variable">`</span></span>
<span class="token keyword">if</span> <span class="token builtin class-name">test</span> <span class="token parameter variable">-x</span> <span class="token string">&quot;<span class="token variable">$d</span>/bin/my_print_defaults&quot;</span>
<span class="token keyword">then</span>
<span class="token assign-left variable">print_defaults</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$d</span>/bin/my_print_defaults&quot;</span>
<span class="token builtin class-name">break</span>
<span class="token keyword">fi</span>
<span class="token keyword">done</span>
<span class="token keyword">fi</span>

<span class="token comment"># Hope it's in the PATH ... but I doubt it</span>
<span class="token builtin class-name">test</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$print_defaults</span>&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">print_defaults</span><span class="token operator">=</span><span class="token string">&quot;my_print_defaults&quot;</span>
<span class="token keyword">fi</span>

<span class="token comment">#</span>
<span class="token comment"># Read defaults file from 'basedir'.   If there is no defaults file there</span>
<span class="token comment"># check if it's in the old (depricated) place (datadir) and read it from there</span>
<span class="token comment">#</span>

<span class="token assign-left variable">extra_args</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span>
<span class="token keyword">if</span> <span class="token builtin class-name">test</span> <span class="token parameter variable">-r</span> <span class="token string">&quot;<span class="token variable">$basedir</span>/my.cnf&quot;</span>
<span class="token keyword">then</span>
<span class="token assign-left variable">extra_args</span><span class="token operator">=</span><span class="token string">&quot;-e <span class="token variable">$basedir</span>/my.cnf&quot;</span>
<span class="token keyword">fi</span>

parse_server_arguments <span class="token variable"><span class="token variable">`</span>$print_defaults $extra_args mysqld server mysql_server mysql.server<span class="token variable">`</span></span>

<span class="token comment">#</span>
<span class="token comment"># Set pid file if not given</span>
<span class="token comment">#</span>
<span class="token keyword">if</span> <span class="token builtin class-name">test</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$mysqld_pid_file_path</span>&quot;</span>
<span class="token keyword">then</span>
<span class="token assign-left variable">mysqld_pid_file_path</span><span class="token operator">=</span><span class="token variable">$datadir</span>/<span class="token variable"><span class="token variable">`</span><span class="token function">hostname</span><span class="token variable">`</span></span>.pid
<span class="token keyword">else</span>
<span class="token keyword">case</span> <span class="token string">&quot;<span class="token variable">$mysqld_pid_file_path</span>&quot;</span> <span class="token keyword">in</span>
/* <span class="token punctuation">)</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
* <span class="token punctuation">)</span>  <span class="token assign-left variable">mysqld_pid_file_path</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$datadir</span>/<span class="token variable">$mysqld_pid_file_path</span>&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
<span class="token keyword">fi</span>

<span class="token keyword">case</span> <span class="token string">&quot;<span class="token variable">$mode</span>&quot;</span> <span class="token keyword">in</span>
<span class="token string">'start'</span><span class="token punctuation">)</span>
<span class="token comment"># Start daemon</span>

<span class="token comment"># Safeguard (relative paths, core dumps..)</span>
<span class="token builtin class-name">cd</span> <span class="token variable">$basedir</span>

<span class="token builtin class-name">echo</span> <span class="token variable">$echo_n</span> <span class="token string">&quot;Starting MySQL&quot;</span>
<span class="token keyword">if</span> <span class="token builtin class-name">test</span> <span class="token parameter variable">-x</span> <span class="token variable">$bindir</span>/mysqld_safe
<span class="token keyword">then</span>
<span class="token comment"># Give extra arguments to mysqld with the my.cnf file. This script</span>
<span class="token comment"># may be overwritten at next upgrade.</span>
<span class="token variable">$bindir</span>/mysqld_safe <span class="token parameter variable">--datadir</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$datadir</span>&quot;</span> --pid-file<span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$mysqld_pid_file_path</span>&quot;</span> <span class="token variable">$other_args</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator">&amp;</span>
wait_for_pid created <span class="token string">&quot;<span class="token variable">$!</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$mysqld_pid_file_path</span>&quot;</span><span class="token punctuation">;</span> <span class="token assign-left variable">return_value</span><span class="token operator">=</span><span class="token variable">$?</span>

<span class="token comment"># Make lock for RedHat / SuSE</span>
<span class="token keyword">if</span> <span class="token builtin class-name">test</span> <span class="token parameter variable">-w</span> <span class="token string">&quot;<span class="token variable">$lockdir</span>&quot;</span>
<span class="token keyword">then</span>
<span class="token function">touch</span> <span class="token string">&quot;<span class="token variable">$lock_file_path</span>&quot;</span>
<span class="token keyword">fi</span>

<span class="token builtin class-name">exit</span> <span class="token variable">$return_value</span>
<span class="token keyword">else</span>
log_failure_msg <span class="token string">&quot;Couldn't find MySQL server (<span class="token variable">$bindir</span>/mysqld_safe)&quot;</span>
<span class="token keyword">fi</span>
<span class="token punctuation">;</span><span class="token punctuation">;</span>

<span class="token string">'stop'</span><span class="token punctuation">)</span>
<span class="token comment"># Stop daemon. We use a signal here to avoid having to know the</span>
<span class="token comment"># root password.</span>

<span class="token keyword">if</span> <span class="token builtin class-name">test</span> <span class="token parameter variable">-s</span> <span class="token string">&quot;<span class="token variable">$mysqld_pid_file_path</span>&quot;</span>
<span class="token keyword">then</span>
<span class="token comment"># signal mysqld_safe that it needs to stop</span>
<span class="token function">touch</span> <span class="token string">&quot;<span class="token variable">$mysqld_pid_file_path</span>.shutdown&quot;</span>

<span class="token assign-left variable">mysqld_pid</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> <span class="token string">&quot;<span class="token variable">$mysqld_pid_file_path</span>&quot;</span><span class="token variable">`</span></span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>kill <span class="token parameter variable">-0</span> <span class="token variable">$mysqld_pid</span> <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>/dev/null<span class="token punctuation">)</span>
<span class="token keyword">then</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$echo_n</span> <span class="token string">&quot;Shutting down MySQL&quot;</span>
<span class="token function">kill</span> <span class="token variable">$mysqld_pid</span>
<span class="token comment"># mysqld should remove the pid file when it exits, so wait for it.</span>
wait_for_pid removed <span class="token string">&quot;<span class="token variable">$mysqld_pid</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$mysqld_pid_file_path</span>&quot;</span><span class="token punctuation">;</span> <span class="token assign-left variable">return_value</span><span class="token operator">=</span><span class="token variable">$?</span>
<span class="token keyword">else</span>
log_failure_msg <span class="token string">&quot;MySQL server process #<span class="token variable">$mysqld_pid</span> is not running!&quot;</span>
<span class="token function">rm</span> <span class="token string">&quot;<span class="token variable">$mysqld_pid_file_path</span>&quot;</span>
<span class="token keyword">fi</span>

<span class="token comment"># Delete lock for RedHat / SuSE</span>
<span class="token keyword">if</span> <span class="token builtin class-name">test</span> <span class="token parameter variable">-f</span> <span class="token string">&quot;<span class="token variable">$lock_file_path</span>&quot;</span>
<span class="token keyword">then</span>
<span class="token function">rm</span> <span class="token parameter variable">-f</span> <span class="token string">&quot;<span class="token variable">$lock_file_path</span>&quot;</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">exit</span> <span class="token variable">$return_value</span>
<span class="token keyword">else</span>
log_failure_msg <span class="token string">&quot;MySQL server PID file could not be found!&quot;</span>
<span class="token keyword">fi</span>
<span class="token punctuation">;</span><span class="token punctuation">;</span>

<span class="token string">'restart'</span><span class="token punctuation">)</span>
<span class="token comment"># Stop the service and regardless of whether it was</span>
<span class="token comment"># running or not, start it again.</span>
<span class="token keyword">if</span> <span class="token variable">$0</span> stop  <span class="token variable">$other_args</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
<span class="token variable">$0</span> start <span class="token variable">$other_args</span>
<span class="token keyword">else</span>
log_failure_msg <span class="token string">&quot;Failed to stop running server, so refusing to try to start.&quot;</span>
<span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token keyword">fi</span>
<span class="token punctuation">;</span><span class="token punctuation">;</span>

<span class="token string">'reload'</span><span class="token operator">|</span><span class="token string">'force-reload'</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token builtin class-name">test</span> <span class="token parameter variable">-s</span> <span class="token string">&quot;<span class="token variable">$mysqld_pid_file_path</span>&quot;</span> <span class="token punctuation">;</span> <span class="token keyword">then</span>
<span class="token builtin class-name">read</span> mysqld_pid <span class="token operator">&lt;</span>  <span class="token string">&quot;<span class="token variable">$mysqld_pid_file_path</span>&quot;</span>
<span class="token function">kill</span> <span class="token parameter variable">-HUP</span> <span class="token variable">$mysqld_pid</span> <span class="token operator">&amp;&amp;</span> log_success_msg <span class="token string">&quot;Reloading service MySQL&quot;</span>
<span class="token function">touch</span> <span class="token string">&quot;<span class="token variable">$mysqld_pid_file_path</span>&quot;</span>
<span class="token keyword">else</span>
log_failure_msg <span class="token string">&quot;MySQL PID file could not be found!&quot;</span>
<span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token keyword">fi</span>
<span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token string">'status'</span><span class="token punctuation">)</span>
<span class="token comment"># First, check to see if pid file exists</span>
<span class="token keyword">if</span> <span class="token builtin class-name">test</span> <span class="token parameter variable">-s</span> <span class="token string">&quot;<span class="token variable">$mysqld_pid_file_path</span>&quot;</span> <span class="token punctuation">;</span> <span class="token keyword">then</span> 
<span class="token builtin class-name">read</span> mysqld_pid <span class="token operator">&lt;</span> <span class="token string">&quot;<span class="token variable">$mysqld_pid_file_path</span>&quot;</span>
<span class="token keyword">if</span> <span class="token function">kill</span> <span class="token parameter variable">-0</span> <span class="token variable">$mysqld_pid</span> <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>/dev/null <span class="token punctuation">;</span> <span class="token keyword">then</span> 
log_success_msg <span class="token string">&quot;MySQL running (<span class="token variable">$mysqld_pid</span>)&quot;</span>
<span class="token builtin class-name">exit</span> <span class="token number">0</span>
<span class="token keyword">else</span>
log_failure_msg <span class="token string">&quot;MySQL is not running, but PID file exists&quot;</span>
<span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token keyword">fi</span>
<span class="token keyword">else</span>
<span class="token comment"># Try to find appropriate mysqld process</span>
<span class="token assign-left variable">mysqld_pid</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span>pidof $libexecdir/mysqld<span class="token variable">`</span></span>

<span class="token comment"># test if multiple pids exist</span>
<span class="token assign-left variable">pid_count</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">echo</span> $mysqld_pid <span class="token operator">|</span> <span class="token function">wc</span> <span class="token parameter variable">-w</span><span class="token variable">`</span></span>
<span class="token keyword">if</span> <span class="token builtin class-name">test</span> <span class="token variable">$pid_count</span> <span class="token parameter variable">-gt</span> <span class="token number">1</span> <span class="token punctuation">;</span> <span class="token keyword">then</span>
log_failure_msg <span class="token string">&quot;Multiple MySQL running but PID file could not be found (<span class="token variable">$mysqld_pid</span>)&quot;</span>
<span class="token builtin class-name">exit</span> <span class="token number">5</span>
<span class="token keyword">elif</span> <span class="token builtin class-name">test</span> <span class="token parameter variable">-z</span> <span class="token variable">$mysqld_pid</span> <span class="token punctuation">;</span> <span class="token keyword">then</span> 
<span class="token keyword">if</span> <span class="token builtin class-name">test</span> <span class="token parameter variable">-f</span> <span class="token string">&quot;<span class="token variable">$lock_file_path</span>&quot;</span> <span class="token punctuation">;</span> <span class="token keyword">then</span> 
log_failure_msg <span class="token string">&quot;MySQL is not running, but lock file (<span class="token variable">$lock_file_path</span>) exists&quot;</span>
<span class="token builtin class-name">exit</span> <span class="token number">2</span>
<span class="token keyword">fi</span> 
log_failure_msg <span class="token string">&quot;MySQL is not running&quot;</span>
<span class="token builtin class-name">exit</span> <span class="token number">3</span>
<span class="token keyword">else</span>
log_failure_msg <span class="token string">&quot;MySQL is running but PID file could not be found&quot;</span>
<span class="token builtin class-name">exit</span> <span class="token number">4</span>
<span class="token keyword">fi</span>
<span class="token keyword">fi</span>
<span class="token punctuation">;</span><span class="token punctuation">;</span>
*<span class="token punctuation">)</span>
<span class="token comment"># usage</span>
<span class="token assign-left variable">basename</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">basename</span> <span class="token string">&quot;<span class="token variable">$0</span>&quot;</span><span class="token variable">`</span></span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Usage: <span class="token variable">$basename</span>  {start|stop|restart|reload|force-reload|status}  [ MySQL server options ]&quot;</span>
<span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>

<span class="token builtin class-name">exit</span> <span class="token number">0</span>
</code></pre></div><p>复制mysql.server 修改文件名（必须以d结尾否则无法add）</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@tangxinNo1 mysql13379<span class="token punctuation">]</span><span class="token comment"># cp support-files/mysql.server /etc/init.d/mysql13379d </span>
<span class="token punctuation">[</span>root@tangxinNo1 init.d<span class="token punctuation">]</span><span class="token comment"># chkconfig --add mysql13307d</span>
<span class="token punctuation">[</span>root@tangxinNo1 init.d<span class="token punctuation">]</span><span class="token comment"># chkconfig --list</span>


注：该输出结果只显示 SysV 服务，并不包含
原生 systemd 服务。SysV 配置数据
可能被原生 systemd 配置覆盖。

      要列出 systemd 服务，请执行 <span class="token string">'systemctl list-unit-files'</span>。
      查看在具体 target 启用的服务请执行
      <span class="token string">'systemctl list-dependencies [target]'</span>。

bt              <span class="token number">0</span>:关    <span class="token number">1</span>:关    <span class="token number">2</span>:开    <span class="token number">3</span>:开    <span class="token number">4</span>:开    <span class="token number">5</span>:开    <span class="token number">6</span>:关
mysql13307d     <span class="token number">0</span>:关    <span class="token number">1</span>:关    <span class="token number">2</span>:开    <span class="token number">3</span>:开    <span class="token number">4</span>:开    <span class="token number">5</span>:开    <span class="token number">6</span>:关
netconsole      <span class="token number">0</span>:关    <span class="token number">1</span>:关    <span class="token number">2</span>:关    <span class="token number">3</span>:关    <span class="token number">4</span>:关    <span class="token number">5</span>:关    <span class="token number">6</span>:关
network         <span class="token number">0</span>:关    <span class="token number">1</span>:关    <span class="token number">2</span>:开    <span class="token number">3</span>:开    <span class="token number">4</span>:开    <span class="token number">5</span>:开    <span class="token number">6</span>:关
vmware-tools    <span class="token number">0</span>:关    <span class="token number">1</span>:关    <span class="token number">2</span>:开    <span class="token number">3</span>:开    <span class="token number">4</span>:开    <span class="token number">5</span>:开    <span class="token number">6</span>:关
vmware-tools-thinprint  <span class="token number">0</span>:关    <span class="token number">1</span>:关    <span class="token number">2</span>:开    <span class="token number">3</span>:开    <span class="token number">4</span>:开    <span class="token number">5</span>:开    <span class="token number">6</span>:关

如果看到mysql的服务，并且3,4,5都是on的话则成功，如果是off，则键入

<span class="token punctuation">[</span>root@tangxinNo1 init.d<span class="token punctuation">]</span><span class="token comment"># chkconfig --level 345 mysqld on</span>

重启测试
<span class="token punctuation">[</span>root@tangxinNo1 init.d<span class="token punctuation">]</span><span class="token comment"># reboot</span>

重启后
<span class="token punctuation">[</span>root@tangxinNo1 ~<span class="token punctuation">]</span><span class="token comment"># ps -ef|grep mysql</span>
root       <span class="token number">8137</span>      <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">22</span>:27 ?        00:00:00 /bin/sh /data/mysql/mysql13307                                                         /bin/mysqld_safe <span class="token parameter variable">--datadir</span><span class="token operator">=</span>/data/mysql/mysql13307/data --pid-file<span class="token operator">=</span>/data/mysql/mysql13307/run/mysqld.pid
mysql      <span class="token number">8584</span>   <span class="token number">8137</span>  <span class="token number">1</span> <span class="token number">22</span>:27 ?        00:00:00 /data/mysql/mysql13307/bin/mysqld 
<span class="token parameter variable">--basedir</span><span class="token operator">=</span>/data/mysql/mysql13307 
<span class="token parameter variable">--datadir</span><span class="token operator">=</span>/data/mysql/mysql13307/data
<span class="token parameter variable">--plugindir</span><span class="token operator">=</span>/data/mysql/mysql13307/lib/plugin 
<span class="token parameter variable">--user</span><span class="token operator">=</span>mysql 
--log-error<span class="token operator">=</span>/data/mysql/mysql13307/log/mysqld.log 
<span class="token parameter variable">--pidfile</span><span class="token operator">=</span>/data/mysql/mysql13307/run/mysqld.pid 
<span class="token parameter variable">--socket</span><span class="token operator">=</span>/data/mysql/mysql13307/mysql.sock <span class="token parameter variable">--port</span><span class="token operator">=</span><span class="token number">3307</span>
root       <span class="token number">9259</span>   <span class="token number">9204</span>  <span class="token number">0</span> <span class="token number">22</span>:28 pts/0    00:00:00 <span class="token function">grep</span> <span class="token parameter variable">--color</span><span class="token operator">=</span>auto mysql
<span class="token punctuation">[</span>root@tangxinNo1 ~<span class="token punctuation">]</span><span class="token comment">#</span>

</code></pre></div><p>后续安装多个mysql同样如此安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@tangxinNo1 mysql13307<span class="token punctuation">]</span><span class="token comment"># ps -ef|grep mysql</span>
mysql     <span class="token number">13973</span>      <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">21</span>:20 ?        00:00:05 /data/mysql/mysql13306/bin/mysqld --defaults-file<span class="token operator">=</span>/data/mysql/mysql13306/my.cnf
mysql     <span class="token number">16939</span>      <span class="token number">1</span>  <span class="token number">1</span> <span class="token number">21</span>:47 ?        00:00:00 /data/mysql/mysql13307/bin/mysqld --defaults-file<span class="token operator">=</span>/data/mysql/mysql13307/my.cnf
root      <span class="token number">17032</span>  <span class="token number">16141</span>  <span class="token number">0</span> <span class="token number">21</span>:48 pts/0    00:00:00 <span class="token function">grep</span> <span class="token parameter variable">--color</span><span class="token operator">=</span>auto mysql
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/运维/Linux/MySQL常用命令.html">
        MySQL常用命令
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d7322905.js" defer></script><script src="/assets/js/2.c3162e30.js" defer></script><script src="/assets/js/69.77175893.js" defer></script>
  </body>
</html>
